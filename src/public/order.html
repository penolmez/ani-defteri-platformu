<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sipari≈ü Paneli</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style type="text/tailwindcss">
        body { font-family: 'Outfit', sans-serif; }
        
        .section-card { 
            @apply bg-white rounded-2xl p-6 shadow-[0_4px_20px_-4px_rgba(0,0,0,0.1)] border border-slate-100 mb-8 flex flex-col md:flex-row gap-8 items-start hover:shadow-[0_10px_30px_-4px_rgba(0,0,0,0.1)] transition duration-300; 
        }
        .section-img { 
            @apply w-full md:w-48 h-auto rounded-lg shadow-sm border border-slate-100 object-cover flex-shrink-0; 
        }
        .section-content { @apply flex-1 w-full space-y-4; }
        .section-title { @apply text-lg font-bold text-slate-800 mb-3 flex items-center gap-2; }
        
        /* Inputs & Magic Button */
        .input-group { @apply flex-1 flex gap-2 items-center w-full; }
        .input-track { 
            @apply w-full p-3.5 bg-slate-50 border-0 rounded-xl ring-1 ring-slate-200 text-sm text-slate-700 focus:bg-white focus:ring-2 focus:ring-orange-500 focus:shadow-md outline-none transition placeholder-slate-400 font-medium; 
        }
        .magic-btn {
            @apply p-3 text-orange-500 hover:text-orange-600 hover:bg-orange-50 rounded-xl transition-colors cursor-pointer flex-shrink-0 shadow-sm border border-slate-100 bg-white;
        }

        .drop-zone { 
            @apply relative w-28 h-28 aspect-square flex-shrink-0 bg-slate-50 border-2 border-dashed border-slate-300 rounded-xl flex flex-col items-center justify-center cursor-pointer hover:border-orange-500 hover:bg-orange-50 hover:scale-105 transition duration-300 overflow-hidden shadow-sm; 
        }
        .drop-zone.drag-over { @apply border-orange-600 bg-orange-100 scale-110 shadow-lg; }
        .preview-layer { @apply absolute inset-0 bg-cover bg-center bg-no-repeat z-10 pointer-events-none opacity-0 transition-opacity duration-300; }
        .delete-btn { @apply absolute top-1 right-1 bg-white text-red-500 rounded-full p-1.5 shadow-md opacity-0 scale-75 group-hover:opacity-100 group-hover:scale-100 transition-all z-20 cursor-pointer hover:bg-red-50; }
        
        /* Modal Stilleri */
        #magicModal {
            @apply fixed inset-0 bg-slate-900/50 z-[100] hidden flex items-center justify-center p-4 backdrop-blur-sm;
        }
        .modal-content {
            @apply bg-white w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[80vh];
        }
        .modal-header {
            @apply p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50;
        }
        .modal-body {
            @apply p-4 overflow-y-auto;
        }
        .suggestion-chip {
            @apply block w-full text-left p-3 mb-2 rounded-lg text-sm text-slate-700 hover:bg-orange-50 hover:text-orange-700 transition border border-slate-100 cursor-pointer;
        }
        .tab-btn {
            @apply flex-1 py-3 text-sm font-medium text-slate-400 border-b-2 border-transparent hover:text-slate-700 hover:bg-slate-50 transition;
        }
        .tab-btn.active {
            @apply text-orange-600 border-orange-600 bg-orange-50/50;
        }

        .spinner { border: 4px solid rgba(255, 255, 255, 0.3); border-radius: 50%; border-top: 4px solid #fff; width: 40px; height: 40px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>

<body class="bg-gray-50 text-slate-800 h-screen flex flex-col">

    <div id="loadingOverlay"
        class="fixed inset-0 bg-slate-900/90 z-[70] hidden flex flex-col items-center justify-center p-4 backdrop-blur-sm transition-opacity">
        <div class="bg-white p-10 rounded-3xl flex flex-col items-center shadow-2xl max-w-sm w-full text-center">
            <div class="w-16 h-16 border-4 border-orange-100 border-t-orange-600 rounded-full animate-spin mb-6"></div>
            <h3 class="text-2xl font-bold text-slate-800 mb-2">Sipari≈üiniz Olu≈üturuluyor... üé®</h3>
            <p class="text-slate-500 text-sm">Fotoƒüraflarƒ±nƒ±z ve bilgileriniz g√ºvenle kaydediliyor.<br>Bu birka√ß dakika
                s√ºrebilir, l√ºtfen bekleyin.</p>
        </div>
    </div>

    <div id="magicModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="font-bold text-slate-800 flex items-center gap-2">‚ú® Hazƒ±r Mesaj Se√ß <span
                        id="modalTargetName"
                        class="text-xs font-normal text-slate-400 bg-slate-200 px-2 py-0.5 rounded-full hidden"></span>
                </h3>
                <button onclick="closeMagicModal()"
                    class="text-slate-400 hover:text-red-500 text-2xl leading-none">&times;</button>
            </div>
            <div class="flex border-b border-slate-100">
                <button class="tab-btn active" onclick="switchTab('romantic')">üíò Romantik</button>
                <button class="tab-btn" onclick="switchTab('emotional')">ü•∫ Duygusal</button>
                <button class="tab-btn" onclick="switchTab('funny')">üòÇ Komik</button>
            </div>
            <div class="modal-body" id="suggestionList"></div>
        </div>
    </div>

    <div class="bg-white/80 backdrop-blur-md border-b border-slate-200 sticky top-0 z-50 py-3 shadow-sm">
        <div class="container mx-auto max-w-5xl px-4 flex items-center gap-4">
            <span class="text-xs font-bold text-slate-400 uppercase tracking-widest hidden sm:block">Tamamlanma</span>
            <div class="flex-1 h-2.5 bg-slate-200 rounded-full overflow-hidden">
                <div id="progressBar"
                    class="h-full bg-orange-600 w-0 transition-all duration-700 ease-out rounded-full shadow-[0_0_10px_rgba(234,88,12,0.5)]">
                </div>
            </div>
            <span id="progressText" class="text-sm font-bold text-orange-600 w-10 text-right">0%</span>
        </div>
    </div>

    <div class="flex-1 overflow-y-auto w-full scroll-smooth">
        <div class="container mx-auto max-w-5xl p-4 md:p-8 pb-40">

            <form id="autoForm" enctype="multipart/form-data">
                <!-- Hidden token field -->
                <input type="hidden" name="_token" id="tokenField">

                <div class="mb-12 text-center py-6">
                    <input type="text" name="musteri_adi" id="customerNameField" required
                        class="w-full md:w-2/3 text-4xl md:text-5xl font-black text-center bg-transparent border-b-4 border-slate-200 focus:border-orange-600 outline-none pb-4 transition-colors placeholder-slate-300 text-slate-800"
                        placeholder="ƒ∞sim ve Soyisim">
                    <p id="tokenInfo" class="hidden mt-4 text-sm text-slate-500">
                        üîí Bu link sizin i√ßin √∂zel olarak olu≈üturulmu≈ütur
                    </p>
                </div>

                <section class="section-card">
                    <img src="/examples/on_kapak.jpg" class="section-img" alt="√ñn Kapak">
                    <div class="section-content">
                        <h2 class="section-title text-rose-600">1. A≈ükƒ±n Ba≈ülangƒ±cƒ± (√ñn Kapak)</h2>
                        <div class="flex gap-4 mb-4">
                            <div class="drop-zone group" data-name="01_Sayfa">
                                <input type="file" name="01_Sayfa" class="hidden input-file" accept="image/*">
                                <div class="text-center z-0"><span class="text-2xl mb-1 block">üì∏</span><span
                                        class="text-[10px] font-bold text-slate-500 uppercase">Kapak</span></div>
                                <div class="preview-layer"></div>
                                <button class="delete-btn hidden"><svg width="14" height="14" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="3">
                                        <path d="M18 6 6 18" />
                                        <path d="m6 6 12 12" />
                                    </svg></button>
                            </div>
                            <!--
                            <div class="input-group">
                                <input type="text" name="Text_Ana_Baslik" placeholder="Kapak Ba≈ülƒ±ƒüƒ± (Max 10)"
                                    maxlength="10" class="input-track">
                                <button type="button" class="magic-btn" onclick="openMagicModal('Text_Ana_Baslik')"
                                    title="Hazƒ±r Mesaj">‚ú®</button>
                            </div>
                            -->
                        </div>
                    </div>
                </section>

                <section class="section-card">
                    <img src="/examples/yirtik_kagit_ ve_sayfa_2.jpg" class="section-img" alt="Yƒ±rtƒ±k Kaƒüƒ±t">
                    <div class="section-content">
                        <h2 class="section-title text-orange-600">2. Anƒ±lar (Kesikli Kaƒüƒ±t)</h2>
                        <div class="flex flex-wrap gap-4 mb-4">
                            <div class="drop-zone group" data-name="03_Sayfa_1">
                                <input type="file" name="03_Sayfa_1" class="hidden input-file" accept="image/*">
                                <div class="text-center z-0"><span class="text-xl mb-1 block">üñºÔ∏è</span><span
                                        class="text-[10px] font-bold text-slate-500">Foto 1</span></div>
                                <div class="preview-layer"></div>
                                <button class="delete-btn hidden"><svg width="14" height="14" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="3">
                                        <path d="M18 6 6 18" />
                                        <path d="m6 6 12 12" />
                                    </svg></button>
                            </div>
                            <div class="drop-zone group" data-name="03_Sayfa_2">
                                <input type="file" name="03_Sayfa_2" class="hidden input-file" accept="image/*">
                                <div class="text-center z-0"><span class="text-xl mb-1 block">üñºÔ∏è</span><span
                                        class="text-[10px] font-bold text-slate-500">Foto 2</span></div>
                                <div class="preview-layer"></div>
                                <button class="delete-btn hidden"><svg width="14" height="14" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="3">
                                        <path d="M18 6 6 18" />
                                        <path d="m6 6 12 12" />
                                    </svg></button>
                            </div>
                        </div>
                        <div class="input-group">
                            <input type="text" name="Text_03_Sayfa" placeholder="Kƒ±sa Not (Max 35)" maxlength="35"
                                class="input-track">
                            <button type="button" class="magic-btn" onclick="openMagicModal('Text_03_Sayfa')"
                                title="Hazƒ±r Mesaj">‚ú®</button>
                        </div>
                    </div>
                </section>

                <section class="section-card">
                    <img src="/examples/film_seridi_1_ve_2.jpg" class="section-img" alt="≈ûerit 1">
                    <div class="section-content">
                        <h2 class="section-title text-indigo-600">3. Film ≈ûeridi - B√∂l√ºm 1</h2>
                        <div class="flex gap-4 mb-4">
                            <div class="drop-zone group" data-name="06_Sayfa">
                                <input type="file" name="06_Sayfa" class="hidden input-file" accept="image/*">
                                <div class="text-center z-0"><span class="text-xl mb-1 block">üéûÔ∏è</span><span
                                        class="text-[10px] font-bold text-slate-500">≈ûerit</span></div>
                                <div class="preview-layer"></div>
                                <button class="delete-btn hidden"><svg width="14" height="14" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="3">
                                        <path d="M18 6 6 18" />
                                        <path d="m6 6 12 12" />
                                    </svg></button>
                            </div>
                            <div class="input-group">
                                <input type="text" name="Text_06_Sayfa" placeholder="Etiket (Max 10)" maxlength="10"
                                    class="input-track">
                                <button type="button" class="magic-btn" onclick="openMagicModal('Text_06_Sayfa')"
                                    title="Hazƒ±r Mesaj">‚ú®</button>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="section-card">
                    <img src="/examples/film_seridi_1_ve_2.jpg" class="section-img" alt="≈ûerit 2">
                    <div class="section-content">
                        <h2 class="section-title text-indigo-600">4. Film ≈ûeridi - B√∂l√ºm 2</h2>
                        <div class="flex gap-4 mb-4">
                            <div class="drop-zone group" data-name="07_Sayfa">
                                <input type="file" name="07_Sayfa" class="hidden input-file" accept="image/*">
                                <div class="text-center z-0"><span class="text-xl mb-1 block">üéûÔ∏è</span><span
                                        class="text-[10px] font-bold text-slate-500">≈ûerit</span></div>
                                <div class="preview-layer"></div>
                                <button class="delete-btn hidden"><svg width="14" height="14" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="3">
                                        <path d="M18 6 6 18" />
                                        <path d="m6 6 12 12" />
                                    </svg></button>
                            </div>
                            <div class="input-group">
                                <input type="text" name="Text_07_Sayfa" placeholder="Etiket (Max 10)" maxlength="10"
                                    class="input-track">
                                <button type="button" class="magic-btn" onclick="openMagicModal('Text_07_Sayfa')"
                                    title="Hazƒ±r Mesaj">‚ú®</button>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="section-card">
                    <img src="/examples/spotify_ve_netflix.jpg" class="section-img" alt="Loveflix">
                    <div class="section-content">
                        <h2 class="section-title text-red-600">5. Bizim Filmimiz (Loveflix)</h2>
                        <div class="flex gap-4 mb-4">
                            <div class="drop-zone group" data-name="08_Sayfa">
                                <input type="file" name="08_Sayfa" class="hidden input-file" accept="image/*">
                                <div class="text-center z-0"><span class="text-xl mb-1 block">üé¨</span><span
                                        class="text-[10px] font-bold text-slate-500">Posteri</span></div>
                                <div class="preview-layer"></div>
                                <button class="delete-btn hidden"><svg width="14" height="14" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="3">
                                        <path d="M18 6 6 18" />
                                        <path d="m6 6 12 12" />
                                    </svg></button>
                            </div>
                            <div class="flex-1 space-y-3">
                                <div class="input-group">
                                    <input type="text" name="Text_Film_Baslik" placeholder="Film Ba≈ülƒ±ƒüƒ± (Max 24)"
                                        maxlength="24" class="input-track">
                                    <button type="button" class="magic-btn" onclick="openMagicModal('Text_Film_Baslik')"
                                        title="Hazƒ±r Mesaj">‚ú®</button>
                                </div>
                                <input type="text" name="Text_Film_Turler" placeholder="T√ºr (Max 17)" maxlength="17"
                                    class="input-track">
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-3 mb-3">
                            <input type="text" name="Text_Film_Oyuncu_1" placeholder="Oyuncu 1 (Max 15)" maxlength="15"
                                class="input-track">
                            <input type="text" name="Text_Film_Oyuncu_2" placeholder="Oyuncu 2 (Max 15)" maxlength="15"
                                class="input-track">
                        </div>
                        <div class="input-group">
                            <input type="text" name="Text_Film_Aciklama" placeholder="Film Konusu (Max 320)"
                                maxlength="320" class="input-track">
                            <button type="button" class="magic-btn" onclick="openMagicModal('Text_Film_Aciklama')"
                                title="Hazƒ±r Mesaj">‚ú®</button>
                        </div>
                    </div>
                </section>

                <section class="section-card">
                    <img src="/examples/spotify_ve_netflix.jpg" class="section-img" alt="Spotify">
                    <div class="section-content">
                        <h2 class="section-title text-green-600">6. Bizim ≈ûarkƒ±mƒ±z (Spotify)</h2>
                        <div class="flex gap-4 mb-4">
                            <div class="drop-zone group" data-name="09_Sayfa">
                                <input type="file" name="09_Sayfa" class="hidden input-file" accept="image/*">
                                <div class="text-center z-0"><span class="text-xl mb-1 block">üéµ</span><span
                                        class="text-[10px] font-bold text-slate-500">Alb√ºm</span></div>
                                <div class="preview-layer"></div>
                                <button class="delete-btn hidden"><svg width="14" height="14" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="3">
                                        <path d="M18 6 6 18" />
                                        <path d="m6 6 12 12" />
                                    </svg></button>
                            </div>
                            <div class="flex-1 space-y-3 self-center">
                                <input type="text" name="Text_Sarki_Ad" placeholder="≈ûarkƒ± Adƒ± (Max 17)" maxlength="17"
                                    class="input-track">
                                <input type="text" name="Text_Sarki_Sanatci" placeholder="Sanat√ßƒ± (Max 26)"
                                    maxlength="26" class="input-track">
                            </div>
                        </div>
                    </div>
                </section>

                <section class="section-card">
                    <img src="/examples/kamera_ve_selfie.jpg" class="section-img" alt="Kamera">
                    <div class="section-content">
                        <h2 class="section-title text-slate-700">7. Kamera Arkasƒ± (10. Sayfa)</h2>
                        <div class="drop-zone w-32 h-32 group" data-name="10_Sayfa">
                            <input type="file" name="10_Sayfa" class="hidden input-file" accept="image/*">
                            <div class="text-center z-0"><span class="text-3xl mb-1 block">üì∑</span><span
                                    class="text-[10px] font-bold text-slate-500">Fotoƒüraf</span></div>
                            <div class="preview-layer"></div>
                            <button class="delete-btn hidden"><svg width="14" height="14" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="3">
                                    <path d="M18 6 6 18" />
                                    <path d="m6 6 12 12" />
                                </svg></button>
                        </div>
                    </div>
                </section>

                <section class="section-card">
                    <img src="/examples/kamera_ve_selfie.jpg" class="section-img" alt="Selfie">
                    <div class="section-content">
                        <h2 class="section-title text-rose-500">8. Selfie Zamanƒ± (11. Sayfa)</h2>
                        <div class="drop-zone w-32 h-32 group" data-name="11_Sayfa">
                            <input type="file" name="11_Sayfa" class="hidden input-file" accept="image/*">
                            <div class="text-center z-0"><span class="text-3xl mb-1 block">ü§≥</span><span
                                    class="text-[10px] font-bold text-slate-500">Selfie</span></div>
                            <div class="preview-layer"></div>
                            <button class="delete-btn hidden"><svg width="14" height="14" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="3">
                                    <path d="M18 6 6 18" />
                                    <path d="m6 6 12 12" />
                                </svg></button>
                        </div>
                    </div>
                </section>

                <section class="section-card">
                    <img src="/examples/film_tuneli_1_ve_2.jpg" class="section-img" alt="Film T√ºneli 1">
                    <div class="section-content">
                        <h2 class="section-title text-purple-600">9. Zaman T√ºneli - B√∂l√ºm 1</h2>
                        <div class="flex gap-4 mb-4">
                            <div class="drop-zone group" data-name="14_Sayfa">
                                <input type="file" name="14_Sayfa" class="hidden input-file" accept="image/*">
                                <div class="text-center z-0"><span class="text-xl mb-1 block">üéûÔ∏è</span><span
                                        class="text-[10px] font-bold text-slate-500">T√ºnel</span></div>
                                <div class="preview-layer"></div>
                                <button class="delete-btn hidden"><svg width="14" height="14" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="3">
                                        <path d="M18 6 6 18" />
                                        <path d="m6 6 12 12" />
                                    </svg></button>
                            </div>
                            <div class="input-group">
                                <input type="text" name="Text_14_Sayfa_Ust" placeholder="B√∂l√ºm Ba≈ülƒ±ƒüƒ± (Max 23)"
                                    maxlength="23" class="input-track">
                                <button type="button" class="magic-btn" onclick="openMagicModal('Text_14_Sayfa_Ust')"
                                    title="Hazƒ±r Mesaj">‚ú®</button>
                            </div>
                        </div>
                        <div class="input-group">
                            <textarea name="Text_14_Sayfa_Alt" placeholder="Bu anƒ±n hikayesi nedir? (Max 150)"
                                maxlength="150" rows="2" class="input-track resize-none"></textarea>
                            <button type="button" class="magic-btn h-full" onclick="openMagicModal('Text_14_Sayfa_Alt')"
                                title="Hazƒ±r Mesaj">‚ú®</button>
                        </div>
                    </div>
                </section>

                <section class="section-card">
                    <img src="/examples/film_tuneli_1_ve_2.jpg" class="section-img" alt="Film T√ºneli 2">
                    <div class="section-content">
                        <h2 class="section-title text-purple-600">10. Zaman T√ºneli - B√∂l√ºm 2</h2>
                        <div class="flex gap-4 mb-4">
                            <div class="drop-zone group" data-name="15_Sayfa">
                                <input type="file" name="15_Sayfa" class="hidden input-file" accept="image/*">
                                <div class="text-center z-0"><span class="text-xl mb-1 block">üéûÔ∏è</span><span
                                        class="text-[10px] font-bold text-slate-500">T√ºnel</span></div>
                                <div class="preview-layer"></div>
                                <button class="delete-btn hidden"><svg width="14" height="14" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="3">
                                        <path d="M18 6 6 18" />
                                        <path d="m6 6 12 12" />
                                    </svg></button>
                            </div>
                            <div class="input-group">
                                <input type="text" name="Text_15_Sayfa_Ust" placeholder="B√∂l√ºm Ba≈ülƒ±ƒüƒ± (Max 23)"
                                    maxlength="23" class="input-track">
                                <button type="button" class="magic-btn" onclick="openMagicModal('Text_15_Sayfa_Ust')"
                                    title="Hazƒ±r Mesaj">‚ú®</button>
                            </div>
                        </div>
                        <div class="input-group">
                            <textarea name="Text_15_Sayfa_Alt" placeholder="Peki ya sonra ne oldu? (Max 150)"
                                maxlength="150" rows="2" class="input-track resize-none"></textarea>
                            <button type="button" class="magic-btn h-full" onclick="openMagicModal('Text_15_Sayfa_Alt')"
                                title="Hazƒ±r Mesaj">‚ú®</button>
                        </div>
                    </div>
                </section>

                <section class="section-card">
                    <img src="/examples/arka_kapak.jpg" class="section-img" alt="Arka Kapak">
                    <div class="section-content">
                        <h2 class="section-title text-rose-600">11. Mutlu Son (Arka Kapak)</h2>
                        <div class="flex gap-4 mb-4">
                            <div class="drop-zone group" data-name="16_Sayfa">
                                <input type="file" name="16_Sayfa" class="hidden input-file" accept="image/*">
                                <div class="text-center z-0"><span class="text-2xl mb-1 block">üèÅ</span><span
                                        class="text-[10px] font-bold text-slate-500 uppercase">Son!</span></div>
                                <div class="preview-layer"></div>
                                <button class="delete-btn hidden"><svg width="14" height="14" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="3">
                                        <path d="M18 6 6 18" />
                                        <path d="m6 6 12 12" />
                                    </svg></button>
                                <!--
                            </div>
                            <div class="input-group">
                                <input type="text" name="Text_Arka_Baslik" placeholder="Kapanƒ±≈ü S√∂z√º (Max 10)"
                                    maxlength="10" class="input-track">
                                <button type="button" class="magic-btn" onclick="openMagicModal('Text_Arka_Baslik')"
                                    title="Hazƒ±r Mesaj">‚ú®</button>
                            </div>
                            -->
                            </div>
                        </div>

                </section>

                <section
                    class="section-card bg-orange-50/50 border-orange-100 flex-col md:flex-col items-center text-center p-8">
                    <h2 class="text-2xl font-bold text-slate-800 mb-2">12. Diƒüer Fotoƒüraflarƒ±nƒ±z Buraya</h2>
                    <p class="text-slate-500 mb-6 max-w-lg">Kitabƒ±n geri kalanƒ± i√ßin en g√ºzel anƒ±larƒ±nƒ±zdan 25-40 adet
                        fotoƒüraf se√ßin. Gerisini biz tasarlayalƒ±m.</p>

                    <div class="relative bg-white w-full max-w-md aspect-video rounded-xl border-2 border-dashed border-orange-300 shadow-sm flex flex-col items-center justify-center cursor-pointer hover:bg-orange-50 hover:border-orange-500 transition group"
                        id="bulkDropZone">
                        <input type="file" name="12_Genel_Photos" multiple
                            class="absolute inset-0 opacity-0 cursor-pointer z-10" id="bulkInput" accept="image/*">
                        <span class="text-5xl mb-3 block group-hover:scale-110 transition">üìÇ</span>
                        <span
                            class="px-6 py-2 bg-orange-600 text-white font-bold rounded-full text-sm shadow-md group-hover:bg-orange-700 transition">Toplu
                            Fotoƒüraf Se√ß</span>
                        <p id="bulkCount" class="mt-4 font-bold text-slate-800 text-lg hidden">0 Dosya Se√ßildi</p>
                    </div>
                </section>

                <button type="submit"
                    class="w-full bg-slate-900 text-white font-bold py-6 rounded-2xl text-xl shadow-xl hover:bg-orange-600 hover:scale-[1.005] transition duration-300 flex items-center justify-center gap-3">
                    ‚ú® Kitabƒ±mƒ± Ve Anƒ±larƒ±mƒ± Olu≈ütur
                </button>

            </form>
        </div>
    </div>

    <script>
        // ============================================
        // 1. TOKEN VE M√ú≈ûTERƒ∞ DOƒûRULAMA (EPIC 3 - Token System)
        // ============================================
        (function initToken() {
            const urlPath = window.location.pathname;
            // URL sonundaki token'ƒ± yakala (/o/TOKEN_KODU)
            const tokenMatch = urlPath.match(/\/o\/([a-f0-9]+)$/);

            if (tokenMatch && tokenMatch[1]) {
                const token = tokenMatch[1];
                const tokenInput = document.getElementById('tokenField');
                const infoText = document.getElementById('tokenInfo');

                if (tokenInput) tokenInput.value = token;
                if (infoText) infoText.classList.remove('hidden');

                // Backend API'den m√º≈üteri verisini √ßek (Epic 3.2)
                fetch(`/api/token/${token}`)
                    .then(res => res.json())
                    .then(result => {
                        if (result.success) {
                            const nameField = document.getElementById('customerNameField');
                            if (nameField) {
                                nameField.value = result.customerName;
                                nameField.setAttribute('readonly', true);
                                nameField.classList.add('bg-slate-100', 'cursor-not-allowed');
                                // Progress bar'ƒ±n g√ºncellenmesi i√ßin input event tetikle
                                nameField.dispatchEvent(new Event('input', { bubbles: true }));
                            }
                            console.log('‚úì Token ba≈üarƒ±yla doƒürulandƒ±: ' + result.customerName);
                        } else {
                            console.error('Token hatasƒ±:', result.error);
                            // Token ge√ßersizse kullanƒ±cƒ± uyarƒ±labilir veya y√∂nlendirilebilir
                        }
                    })
                    .catch(err => {
                        console.error('API Baƒülantƒ± Hatasƒ±:', err);
                    });
            }
        })();

        // ============================================
        // 2. GLOBAL FONKSƒ∞YONLAR (Issue #3 Fix: Global Scope)
        // ============================================

        const MESSAGE_TEMPLATES = {
            "Text_Ana_Baslik": {
                romantic: ["Sonsuz A≈ük", "Ruh E≈üim", "Bizimkisi", "A≈ük", "Canƒ±m", "Sevdam", "Huzurum", "Miladƒ±m", "Tek Ger√ßek", "Sol Yanƒ±m"],
                emotional: ["Mucizem", "Nefesim", "√ñmr√ºm", "ƒ∞yi ki...", "Kƒ±ymetlim", "Her ≈ûeyim", "D√ºnyam", "Meleƒüim", "Can √ñz√ºm", "Hayatƒ±m"],
                funny: ["Ba≈ü Belam", "Patron", "Olay Var", "Tƒ±marhane", "Vukuat", "Su√ß Ortak", "Gƒ±cƒ±k", "Belalƒ±m", "≈ûap≈üik", "Kedik"]
            },
            "Text_03_Sayfa": {
                romantic: ["Sen benim en g√ºzel manzaramsƒ±n.", "G√ºl√º≈ü√ºn d√ºnyaya bedel.", "Sonsuza kadar sadece sen.", "Kalbim senin evin olsun.", "Her ≈üey seninle g√ºzel.", "A≈ük, senin adƒ±n.", "G√∂zlerin √∂mre bedel.", "Seninle atan kalbim var.", "D√ºnyam sensin sevgilim.", "Seni seviyorum."],
                emotional: ["Bazƒ± ruhlar evvelden a≈üinadƒ±r.", "Yanƒ±nda zaman dursun istiyorum.", "Sen benim kabul olmu≈ü duamsƒ±n.", "Varlƒ±ƒüƒ±n bana en b√ºy√ºk hediye.", "Sensiz bir an bile zor.", "Kalbimde yerin hep ayrƒ±.", "Huzurun ta kendisisin.", "ƒ∞yi ki doƒüdun y√ºreƒüime.", "Seninle ge√ßen her an l√ºtuf.", "Eksik par√ßam sensin."],
                funny: ["Beni benden alƒ±rsan seni...", "Yemekten sonra en sevdiƒüimsin.", "≈ûifresi √ß√∂z√ºlemeyen tek sƒ±rrƒ±m.", "Birlikteyken diyet bozulur.", "Tatlƒ±m, tuzlum, ek≈üim.", "Seninle delirmek g√ºzel.", "Gƒ±cƒ±k ama benim gƒ±cƒ±ƒüƒ±m.", "Kapat g√∂zlerini, sev beni.", "A≈ük karƒ±n doyurmaz ama...", "Arƒ±zalƒ± bir a≈ük bizimkisi."]
            },
            "Text_06_Sayfa": {
                romantic: ["Huzurum", "Nefesim", "Sol yanƒ±m", "Sonsuzum", "A≈ükƒ±m", "Sevgilim", "Bitanem", "Her≈üeyim", "Meleƒüim", "Canƒ±m"],
                emotional: ["Can √∂z√ºm", "Kƒ±ymetlim", "Her ≈üeyim", "Mevsimim", "Yuvam", "√ñmr√ºm", "Kalbime", "Ruhum", "Cennetim", "Nefes"],
                funny: ["Belalƒ±m", "Gƒ±cƒ±k", "Oburum", "Kedik", "≈ûap≈üik", "Deli", "Lazƒ±m", "Kƒ±smet", "Patron", "Zalƒ±m"]
            },
            "Text_07_Sayfa": {
                romantic: ["Bir √ñm√ºr", "Seninle", "Daima", "Tutkum", "Meleƒüim", "Prenses", "Prens", "A≈ük", "Kalp", "Biricik"],
                emotional: ["Kalbimin", "D√ºnyam", "Hayatƒ±m", "G√ºne≈üim", "Mucizem", "Yƒ±ldƒ±zƒ±m", "Gecem", "G√ºnd√ºz", "Tekim", "Sevdam"],
                funny: ["Zehirli Ok", "Su√ß Ortaƒüƒ±", "Tƒ±marhane", "Vukuat", "Patron", "≈ûef", "M√ºd√ºr", "Olay", "Fena", "Bomba"]
            },
            "Text_Film_Baslik": {
                romantic: ["A≈ükƒ±mƒ±zƒ±n Filmi", "Sonsuz Senaryo", "Bizim Hikayemiz", "En G√ºzel Sahnemiz", "Romantik Komedimiz", "A≈ük Tesad√ºfleri Sever", "Mutluluk Zamanƒ±", "Sadece Sen ve Ben", "Hayatƒ±mƒ±n Ba≈ürol√º", "Unutulmaz Anlar"],
                emotional: ["Kalbimdeki ƒ∞mza", "Sessiz √áƒ±ƒülƒ±k", "Derin Bir Bakƒ±≈ü", "Yol Arkada≈üƒ±m", "Hayat Aƒüacƒ±m", "Kader Baƒüƒ±m", "Ruhumun Aynasƒ±", "Beklenen G√ºn", "Sevgi Yolu", "Umut I≈üƒ±ƒüƒ±"],
                funny: ["Evde Tek Ba≈üƒ±na Biz", "Yine Mi Sen?", "Eyvah A≈ük Geldi", "√áƒ±lgƒ±n A≈üƒ±klar", "Deli ile Veli", "Tencere Kapak", "A≈ük Grevi", "Tatlƒ± Bela", "Firari A≈ük", "Komedi D√ºkkanƒ±"]
            },
            "Text_Film_Aciklama": {
                romantic: ["Sƒ±radan bir g√ºn√ºn, hayatƒ±mƒ±n en g√ºzel hikayesine d√∂n√º≈üt√ºƒü√º o an... Seninle ba≈ülayan her g√ºn, mutlu sonla biten bir film gibi. Sen benim ba≈ürol√ºm, y√∂netmenim ve en sadƒ±k izleyicimsin. Bu film hi√ß bitmesin.", "G√∂zlerinde kaybolduƒüum, her karesinde a≈ükƒ± yeniden ke≈üfettiƒüim bir ser√ºven. Bu hikaye hi√ß bitmesin, jenerik hi√ß akmasƒ±n istiyorum. Seni √ßok seviyorum. Birlikte nice g√ºzel b√∂l√ºmlere."],
                emotional: ["Bazen kelimeler yetmez, sadece bakƒ±≈ülar konu≈üur. Hayatƒ±mƒ±n en zor anlarƒ±nda elimi tutan, en mutlu anlarƒ±mda kahkahama ortak olan canƒ±m sevgilim. ƒ∞yi ki yollarƒ±mƒ±z kesi≈üti.", "Bir tesad√ºf√ºn hayatƒ±mƒ± nasƒ±l deƒüi≈ütirdiƒüinin kanƒ±tƒ±. Seninle ge√ßen her saniye, √∂mr√ºme √∂m√ºr katƒ±yor. Varlƒ±ƒüƒ±na her g√ºn ≈ü√ºkrediyorum. Sen benim en g√ºzel iyikimsin."],
                funny: ["Romantik komedi tadƒ±nda bir hayatƒ±mƒ±z var. Bazen kavga, bazen g√ºr√ºlt√º ama bolca kahkaha! Oscar √∂d√ºl√º alamayƒ±z belki ama 'En ƒ∞yi √áift' √∂d√ºl√º kesinlikle bizim. Mƒ±sƒ±rlarƒ± hazƒ±rlayƒ±n!", "Ba≈ürolde d√ºnyanƒ±n en g√ºzel/yakƒ±≈üƒ±klƒ± insanƒ± ve onun kaprisini √ßeken ben! ≈ûaka bir yana, seninle aksiyon da g√ºzel, dram da. Ama en √ßok komedi yakƒ±≈üƒ±yor bize."]
            },
            "Text_14_Sayfa_Ust": {
                romantic: ["Zaman Durdu", "A≈ük T√ºneli", "Ge√ßmi≈üten Geleceƒüe", "Unutulmaz An", "ƒ∞lk Bakƒ±≈ü", "O G√ºn", "Sihirli An", "Bizim Saatimiz", "Milat", "Ba≈ülangƒ±√ß"],
                emotional: ["Hatƒ±ralar", "ƒ∞z Bƒ±rakan", "Kalbe Dokunan", "D√∂n√ºm Noktasƒ±", "G√∂zya≈üƒ± ve G√ºl√º≈ü", "Kƒ±ymetli", "√ñzel G√ºn", "Saklƒ± An", "Derin", "Hisli"],
                funny: ["O G√ºn Ne Yedik?", "Karnƒ±mƒ±z A√ßtƒ±", "G√ºlmekten √ñld√ºk", "Tipimize Bak", "≈ûaka Gibi", "Komik An", "Yine Olay", "Firarda", "Yakalandƒ±k", "Ofise D√∂n√º≈ü"]
            },
            "Text_14_Sayfa_Alt": {
                romantic: ["Zaman t√ºnelinde kaybolsam, yine seni bulurdum. Ge√ßmi≈üim de sensin, geleceƒüim de. Seninle ge√ßen her saniye √ßok deƒüerli.", "Seninle ge√ßen her an, hafƒ±zama kazƒ±nan en deƒüerli hazine. ƒ∞yi ki varsƒ±n, iyi ki seni tanƒ±dƒ±m."],
                emotional: ["Baktƒ±k√ßa i√ßimin titrediƒüi o anlar... Geriye d√∂n√ºp baktƒ±ƒüƒ±mda 'ƒ∞yi ki' dediƒüim tek ≈üeysin. Seni tanƒ±mak en b√ºy√ºk ≈üansƒ±m.", "Hayat kƒ±sa, ku≈ülar u√ßuyor ve ben seni her ge√ßen g√ºn daha √ßok seviyorum. Bu fotoƒüraf a≈ükƒ±mƒ±zƒ±n tanƒ±ƒüƒ±."],
                funny: ["Bakƒ±≈ülara bak, sanki d√ºnyayƒ± kurtarmƒ±≈üƒ±z. Halbuki sadece acƒ±kmƒ±≈ütƒ±k. Ne g√ºnlerdi ama!", "Bu fotoƒürafta ne kadar g√ºzel √ßƒ±kmƒ±≈üsƒ±n, ben de fena deƒüilim hani! Yine karizmamƒ±z yerinde."]
            },
            "Text_15_Sayfa_Ust": {
                romantic: ["Geleceƒüimiz", "Sonsuzluk", "Yarƒ±nlar Bizim", "Hayallerimiz", "Birlikte", "El Ele", "Yolumuz Bir", "Aydƒ±nlƒ±k", "Umut", "Sevgi"],
                emotional: ["Umut Dolu", "Dua Gibi", "G√ºven", "Sadakat", "Baƒülƒ±lƒ±k", "S√∂z√ºm√ºz", "Yemin", "Kader", "Alƒ±nyazƒ±sƒ±", "ƒ∞nan√ß"],
                funny: ["Zengin Olacaƒüƒ±z", "Diyet Ba≈ülƒ±yor", "Spor Zamanƒ±", "Gezginler", "Yine Yemek", "Uyku Vakti", "Proje", "Planlar", "Ka√ßƒ±≈ü", "Tatil"]
            },
            "Text_15_Sayfa_Alt": {
                romantic: ["Yarƒ±nlar seninle g√ºzel. Elim elinde olduƒüu s√ºrece her yolun sonu √ßi√ßekli bah√ße. Seni √ßok seviyorum.", "Sadece bug√ºn deƒüil, son nefesime kadar yanƒ±ndayƒ±m. Seni √ßok seviyorum, iyi ki hayatƒ±mdasƒ±n."],
                emotional: ["Sen benim g√ºvenli limanƒ±m, fƒ±rtƒ±nada sƒ±ƒüƒ±ndƒ±ƒüƒ±m tek yersin. Varlƒ±ƒüƒ±n g√º√ß veriyor sevgilim.", "Bir fotoƒüraf karesine sƒ±ƒümayan kocaman bir a≈ük bizimkisi. ƒ∞yi ki biz olduk, iyi ki birbirimizi bulduk."],
                funny: ["Birlikte ya≈ülanacaƒüƒ±z dedik, ya≈ülanƒ±yoruz da... Ama hala √ßok genciz be! Ruhumuz 18 hala.", "Gelecekte torunlara g√∂sterip 'Dedemiz ne yakƒ±≈üƒ±klƒ±ymƒ±≈ü' dedirteceƒüimiz o kare. Sakla bunu!"]
            },
            "Text_Arka_Baslik": {
                romantic: ["Sonsuza", "A≈ükla Kal", "Mutlu Son", "Biz", "Daima", "Bitmedi", "En Ba≈ütan", "Sen & Ben", "Huzur", "Sevgiyle"],
                emotional: ["Unutma", "Kalbimdesin", "√ñzlemle", "Dualarƒ±m", "≈û√ºk√ºr", "Tek √áare", "Saygƒ±yla", "Ho≈ü√ßakal", "Emanet", "Can"],
                funny: ["The End", "Bitti", "Daƒüƒ±lƒ±n", "Perde", "Kestik", "Film Bitti", "Yemek?", "Uyku", "Son", "Devam..."]
            }
        };

        let currentInputName = '';
        let currentCategory = 'romantic';

        function openMagicModal(inputName) {
            if (!MESSAGE_TEMPLATES[inputName]) {
                if (inputName.includes('Oyuncu')) {
                    alert("Oyuncu isimleri ki≈üiseldir, l√ºtfen elle giriniz.");
                    return;
                }
                alert("Bu alan i√ßin hazƒ±r mesaj bulunmuyor.");
                return;
            }

            currentInputName = inputName;
            const modalTargetName = document.getElementById('modalTargetName');
            if (modalTargetName) {
                modalTargetName.innerText = inputName;
                modalTargetName.classList.remove('hidden');
            }

            document.getElementById('magicModal').classList.remove('hidden');
            document.getElementById('magicModal').style.display = 'flex';
            switchTab('romantic');
        }

        function closeMagicModal() {
            document.getElementById('magicModal').classList.add('hidden');
            document.getElementById('magicModal').style.display = 'none';
        }

        function switchTab(category) {
            currentCategory = category;

            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.innerText.toLowerCase().includes(category === 'romantic' ? 'romantik' : category === 'emotional' ? 'duygusal' : 'komik')) {
                    btn.classList.add('active');
                }
            });

            const list = document.getElementById('suggestionList');
            list.innerHTML = '';

            const messages = MESSAGE_TEMPLATES[currentInputName] ? MESSAGE_TEMPLATES[currentInputName][category] : [];

            if (messages && messages.length > 0) {
                messages.forEach(msg => {
                    const div = document.createElement('div');
                    div.className = 'suggestion-chip';
                    div.innerText = msg;
                    div.onclick = () => selectMessage(msg);
                    list.appendChild(div);
                });
            } else {
                list.innerHTML = '<p class="text-center text-slate-400 p-4">Bu kategori i√ßin mesaj yok.</p>';
            }
        }

        function selectMessage(text) {
            const input = document.querySelector(`[name="${currentInputName}"]`);
            if (input) {
                const maxLength = input.getAttribute('maxlength');
                if (maxLength && text.length > parseInt(maxLength)) {
                    alert(`Bu mesaj √ßok uzun! (${text.length} karakter). Bu alan en fazla ${maxLength} karakter alabilir.`);
                    return;
                }

                input.value = text;
                // Progress Bar ve Saya√ßlarƒ± g√ºncelle
                input.dispatchEvent(new Event('input', { bubbles: true }));
                closeMagicModal();
            }
        }

        // ============================================
        // 3. DOM Y√úKLENDƒ∞KTEN SONRA √áALI≈ûACAKLAR
        // ============================================
        document.addEventListener('DOMContentLoaded', function () {

            // Modal dƒ±≈üƒ±na tƒ±klama
            const magicModal = document.getElementById('magicModal');
            if (magicModal) {
                magicModal.addEventListener('click', (e) => {
                    if (e.target === magicModal) closeMagicModal();
                });
            }

            // Karakter Sayacƒ±
            document.querySelectorAll('.input-track').forEach(input => {
                input.addEventListener('input', function () {
                    const maxLength = this.getAttribute('maxlength');
                    if (!maxLength) return;
                    const currentLength = this.value.length;

                    let counter = this.parentElement.querySelector('.char-counter');
                    if (!counter) {
                        counter = document.createElement('span');
                        counter.className = 'char-counter text-xs text-slate-400 absolute right-2 bottom-[-20px]';
                        this.parentElement.style.position = 'relative';
                        this.parentElement.appendChild(counter);
                    }

                    counter.textContent = `${currentLength}/${maxLength}`;
                    counter.style.color = currentLength > maxLength * 0.9 ? '#ef4444' : '#64748b';
                });
            });

            // Dosya Y√∂netimi (Drop Zones) - Epic 2 (Upload Security)
            const MAX_FILE_SIZE = 20 * 1024 * 1024; // 20MB Sƒ±nƒ±rƒ±

            document.querySelectorAll('.drop-zone').forEach(zone => {
                const input = zone.querySelector('input');
                const preview = zone.querySelector('.preview-layer');
                const delBtn = zone.querySelector('.delete-btn');

                zone.addEventListener('click', (e) => {
                    if (e.target !== delBtn && !delBtn.contains(e.target)) input.click();
                });

                input.addEventListener('change', () => {
                    if (input.files && input.files[0]) handleFile(input.files[0], preview, delBtn, input);
                });

                delBtn.addEventListener('click', (e) => {
                    e.preventDefault(); e.stopPropagation();
                    input.value = "";
                    preview.style.backgroundImage = 'none';
                    preview.style.opacity = '0';
                    delBtn.classList.add('hidden');
                    updateProgress();
                });

                zone.addEventListener('dragover', (e) => { e.preventDefault(); zone.classList.add('drag-over'); });
                ['dragleave', 'dragend', 'drop'].forEach(evt => {
                    zone.addEventListener(evt, (e) => { e.preventDefault(); zone.classList.remove('drag-over'); });
                });
                zone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    if (e.dataTransfer.files.length) {
                        input.files = e.dataTransfer.files;
                        handleFile(e.dataTransfer.files[0], preview, delBtn, input);
                    }
                });
            });

            function handleFile(file, preview, delBtn, input) {
                if (!file) return;
                if (file.size > MAX_FILE_SIZE) {
                    alert("Uyarƒ±: Bu fotoƒüraf √ßok b√ºy√ºk! (20MB+). L√ºtfen daha k√º√ß√ºƒü√ºn√º se√ßin.");
                    input.value = "";
                    return;
                }
                const reader = new FileReader();
                reader.onload = (e) => {
                    preview.style.backgroundImage = `url('${e.target.result}')`;
                    preview.style.opacity = '1';
                    delBtn.classList.remove('hidden');
                    updateProgress();
                };
                reader.readAsDataURL(file);
            }

            // Toplu Y√ºkleme (Bulk)
            const bulkInput = document.getElementById('bulkInput');
            if (bulkInput) {
                bulkInput.addEventListener('change', () => {
                    const files = Array.from(bulkInput.files);
                    if (files.some(f => f.size > MAX_FILE_SIZE)) {
                        alert("Bazƒ± dosyalar 20MB sƒ±nƒ±rƒ±nƒ± a≈üƒ±yor. L√ºtfen kontrol edin.");
                        bulkInput.value = ""; return;
                    }
                    const countLabel = document.getElementById('bulkCount');
                    countLabel.innerText = `${files.length} Dosya Se√ßildi`;
                    countLabel.classList.remove('hidden');
                    updateProgress();
                });
            }

            // Progress Bar (Issue #4 ve UX)
            window.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' && e.target.nodeName !== 'TEXTAREA') e.preventDefault();
            });

            function updateProgress() {
                const inputs = document.querySelectorAll('.input-track');
                const fileInputs = document.querySelectorAll('.input-file');
                let total = inputs.length + fileInputs.length;
                if (bulkInput) total += 1;

                let filled = 0;
                inputs.forEach(i => { if (i.value.trim() !== '') filled++; });
                fileInputs.forEach(i => { if (i.files.length > 0) filled++; });
                if (bulkInput && bulkInput.files.length > 0) filled++;

                const percent = total > 0 ? Math.round((filled / total) * 100) : 0;
                const progBar = document.getElementById('progressBar');
                const progText = document.getElementById('progressText');

                if (progBar) progBar.style.width = `${percent}%`;
                if (progText) progText.innerText = `${percent}%`;
            }
            document.querySelectorAll('input, textarea').forEach(i => i.addEventListener('input', updateProgress));

            // FORM G√ñNDERME (autoForm ID'si kullanƒ±larak)
            const form = document.getElementById('autoForm');
            if (form) {
                form.addEventListener('submit', async function (e) {
                    e.preventDefault();

                    // Client-Side Validation (Epic 2)
                    const customerNameInput = document.querySelector('[name="musteri_adi"]');
                    if (!customerNameInput || !customerNameInput.value.trim()) {
                        alert("‚ö†Ô∏è M√º≈üteri adƒ± zorunludur!");
                        customerNameInput?.focus();
                        return;
                    }

                    const coverPhotoInput = document.querySelector('[name="01_Sayfa"]');
                    if (!coverPhotoInput || !coverPhotoInput.files || coverPhotoInput.files.length === 0) {
                        alert("‚ö†Ô∏è Kapak fotoƒürafƒ± (01_Sayfa) zorunludur!");
                        document.querySelector('[data-name="01_Sayfa"]')?.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        return;
                    }

                    if (!confirm("Sipari≈üinizi olu≈üturmak √ºzeresiniz. Her ≈üeyin doƒüru olduƒüundan emin misiniz?")) return;

                    // Visual Feedback (Overlay)
                    const overlay = document.getElementById('loadingOverlay');
                    overlay.classList.remove('hidden');

                    const btn = this.querySelector('button[type="submit"]');
                    btn.disabled = true;

                    const formData = new FormData(this);

                    try {
                        // Backend API √áaƒürƒ±sƒ±
                        const res = await fetch('/api/olustur', { method: 'POST', body: formData });
                        const result = await res.json();

                        if (result.success && result.orderId) {
                            overlay.innerHTML = `
                            <div class="bg-white p-10 rounded-3xl flex flex-col items-center shadow-2xl max-w-md w-full text-center">
                                <div class="w-20 h-20 bg-gradient-to-br from-green-400 to-green-600 text-white rounded-full flex items-center justify-center text-4xl mb-6 shadow-lg">‚úì</div>
                                <h3 class="text-3xl font-bold text-slate-800 mb-3">üéâ Te≈üekk√ºr Ederiz!</h3>
                                <p class="text-slate-600 mb-6">Sipari≈üiniz ba≈üarƒ±yla alƒ±ndƒ±. Ekibimiz en kƒ±sa s√ºrede anƒ± defterinizi hazƒ±rlamaya ba≈ülayacak!</p>
                                
                                <div class="w-full bg-gradient-to-br from-orange-50 to-yellow-50 border-2 border-orange-200 rounded-xl p-4 mb-4">
                                    <p class="text-xs font-semibold text-orange-700 uppercase tracking-wide mb-2">üì¶ Sipari≈ü Numaranƒ±z</p>
                                    <div class="flex items-center gap-3 bg-white p-3 rounded-lg border border-orange-300 shadow-sm">
                                        <code id="orderIdDisplay" class="flex-1 text-lg font-bold text-slate-800 font-mono select-all">${result.orderId}</code>
                                        <button onclick="copyOrderId('${result.orderId}')" class="px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg text-sm font-bold transition flex items-center gap-2 shadow-md">
                                            üìã Kopyala
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6 text-left">
                                    <p class="text-sm text-blue-800 font-medium mb-2">üí° <strong>√ñnemli Bilgi:</strong></p>
                                    <p class="text-sm text-blue-700">Bu numarayƒ± g√ºvende tutun! ƒ∞lerleyen s√ºre√ßte bizimle ileti≈üime ge√ßtiƒüinizde bu numarayƒ± kullanarak sipari≈üinizi takip edebilirsiniz.</p>
                                </div>
                                
                                <button onclick="window.location.reload()" class="w-full px-8 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white rounded-xl text-base font-bold transition shadow-lg">
                                    ‚ù§Ô∏è Harika! Kapat
                                </button>
                            </div>
                          `;
                        } else {
                            throw new Error(result.error || "Bilinmeyen hata olu≈ütu.");
                        }
                    } catch (error) {
                        overlay.classList.add('hidden');
                        alert("‚ùå Hata: " + error.message);
                        btn.disabled = false;
                    }
                });
            } else {
                console.error("HATA: 'autoForm' bulunamadƒ±! HTML ID'sini kontrol edin.");
            }

            // Copy Order ID (Global)
            window.copyOrderId = function (orderId) {
                navigator.clipboard.writeText(orderId).then(() => {
                    alert('‚úÖ Sipari≈ü numarasƒ± kopyalandƒ±!\n\n' + orderId);
                }).catch(err => {
                    const textArea = document.createElement('textarea');
                    textArea.value = orderId;
                    textArea.style.position = 'fixed';
                    textArea.style.opacity = '0';
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    alert('‚úÖ Sipari≈ü numarasƒ± kopyalandƒ±!\n\n' + orderId);
                });
            }
        });
    </script>
</body>

</html>