<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SipariÅŸ Paneli</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style type="text/tailwindcss">
        body { font-family: 'Outfit', sans-serif; }
        
        .section-card { 
            @apply bg-white rounded-2xl p-6 shadow-[0_4px_20px_-4px_rgba(0,0,0,0.1)] border border-slate-100 mb-8 flex flex-col md:flex-row gap-8 items-start hover:shadow-[0_10px_30px_-4px_rgba(0,0,0,0.1)] transition duration-300; 
        }
        .section-img { 
            @apply w-full md:w-48 h-auto rounded-lg shadow-sm border border-slate-100 object-cover flex-shrink-0; 
        }
        .section-content { @apply flex-1 w-full space-y-4; }
        .section-title { @apply text-lg font-bold text-slate-800 mb-3 flex items-center gap-2; }
        
        /* Inputs & Magic Button */
        .input-group { @apply flex-1 flex gap-2 items-center w-full; }
        .input-track { 
            @apply w-full p-3.5 bg-slate-50 border-0 rounded-xl ring-1 ring-slate-200 text-sm text-slate-700 focus:bg-white focus:ring-2 focus:ring-orange-500 focus:shadow-md outline-none transition placeholder-slate-400 font-medium; 
        }
        .magic-btn {
            @apply p-3 text-orange-500 hover:text-orange-600 hover:bg-orange-50 rounded-xl transition-colors cursor-pointer flex-shrink-0 shadow-sm border border-slate-100 bg-white;
        }

        .drop-zone { 
            @apply relative w-28 h-28 aspect-square flex-shrink-0 bg-slate-50 border-2 border-dashed border-slate-300 rounded-xl flex flex-col items-center justify-center cursor-pointer hover:border-orange-500 hover:bg-orange-50 hover:scale-105 transition duration-300 overflow-hidden shadow-sm; 
        }
        .drop-zone.drag-over { @apply border-orange-600 bg-orange-100 scale-110 shadow-lg; }
        .preview-layer { @apply absolute inset-0 bg-cover bg-center bg-no-repeat z-10 pointer-events-none opacity-0 transition-opacity duration-300; }
        .delete-btn { @apply absolute top-1 right-1 bg-white text-red-500 rounded-full p-1.5 shadow-md opacity-0 scale-75 group-hover:opacity-100 group-hover:scale-100 transition-all z-20 cursor-pointer hover:bg-red-50; }
        
        /* Modal Stilleri */
        #magicModal {
            @apply fixed inset-0 bg-slate-900/50 z-[100] hidden flex items-center justify-center p-4 backdrop-blur-sm;
        }
        .modal-content {
            @apply bg-white w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[80vh];
        }
        .modal-header {
            @apply p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50;
        }
        .modal-body {
            @apply p-4 overflow-y-auto;
        }
        .suggestion-chip {
            @apply block w-full text-left p-3 mb-2 rounded-lg text-sm text-slate-700 hover:bg-orange-50 hover:text-orange-700 transition border border-slate-100 cursor-pointer;
        }
        .tab-btn {
            @apply flex-1 py-3 text-sm font-medium text-slate-400 border-b-2 border-transparent hover:text-slate-700 hover:bg-slate-50 transition;
        }
        .tab-btn.active {
            @apply text-orange-600 border-orange-600 bg-orange-50/50;
        }

        .spinner { border: 4px solid rgba(255, 255, 255, 0.3); border-radius: 50%; border-top: 4px solid #fff; width: 40px; height: 40px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>

<body class="bg-gray-50 text-slate-800 h-screen flex flex-col">

    <div id="loadingOverlay"
        class="fixed inset-0 bg-slate-900/90 z-[70] hidden flex flex-col items-center justify-center p-4 backdrop-blur-sm transition-opacity">
        <div class="bg-white p-10 rounded-3xl flex flex-col items-center shadow-2xl max-w-sm w-full text-center">
            <div class="w-16 h-16 border-4 border-orange-100 border-t-orange-600 rounded-full animate-spin mb-6"></div>
            <h3 class="text-2xl font-bold text-slate-800 mb-2">SipariÅŸiniz OluÅŸturuluyor... ğŸ¨</h3>
            <p class="text-slate-500 text-sm">FotoÄŸraflarÄ±nÄ±z ve bilgileriniz gÃ¼venle kaydediliyor.<br>Bu birkaÃ§ dakika
                sÃ¼rebilir, lÃ¼tfen bekleyin.</p>
        </div>
    </div>

    <div id="magicModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="font-bold text-slate-800 flex items-center gap-2">âœ¨ HazÄ±r Mesaj SeÃ§ <span
                        id="modalTargetName"
                        class="text-xs font-normal text-slate-400 bg-slate-200 px-2 py-0.5 rounded-full hidden"></span>
                </h3>
                <button onclick="closeMagicModal()"
                    class="text-slate-400 hover:text-red-500 text-2xl leading-none">&times;</button>
            </div>
            <div class="flex border-b border-slate-100">
                <button class="tab-btn active" onclick="switchTab('romantic')">ğŸ’˜ Romantik</button>
                <button class="tab-btn" onclick="switchTab('emotional')">ğŸ¥º Duygusal</button>
                <button class="tab-btn" onclick="switchTab('funny')">ğŸ˜‚ Komik</button>
            </div>
            <div class="modal-body" id="suggestionList"></div>
        </div>
    </div>

    <div class="bg-white/80 backdrop-blur-md border-b border-slate-200 sticky top-0 z-50 py-3 shadow-sm">
        <div class="container mx-auto max-w-5xl px-4 flex items-center gap-4">
            <span class="text-xs font-bold text-slate-400 uppercase tracking-widest hidden sm:block">Tamamlanma</span>
            <div class="flex-1 h-2.5 bg-slate-200 rounded-full overflow-hidden">
                <div id="progressBar"
                    class="h-full bg-orange-600 w-0 transition-all duration-700 ease-out rounded-full shadow-[0_0_10px_rgba(234,88,12,0.5)]">
                </div>
            </div>
            <span id="progressText" class="text-sm font-bold text-orange-600 w-10 text-right">0%</span>
        </div>
    </div>

    <div class="flex-1 overflow-y-auto w-full scroll-smooth">
        <div class="container mx-auto max-w-5xl p-4 md:p-8 pb-40">

            <form id="autoForm" enctype="multipart/form-data">
                <!-- Hidden token field -->
                <input type="hidden" name="_token" id="tokenField">

                <div class="mb-12 text-center py-6">
                    <input type="text" name="musteri_adi" id="customerNameField" required
                        class="w-full md:w-2/3 text-4xl md:text-5xl font-black text-center bg-transparent border-b-4 border-slate-200 focus:border-orange-600 outline-none pb-4 transition-colors placeholder-slate-300 text-slate-800"
                        placeholder="Ä°sim ve Soyisim">
                    <p id="tokenInfo" class="hidden mt-4 text-sm text-slate-500">
                        ğŸ”’ Bu link sizin iÃ§in Ã¶zel olarak oluÅŸturulmuÅŸtur
                        <br>
                        ğŸ–¼ï¸ DoldurmadÄ±ÄŸÄ±nÄ±z fotoÄŸraf alanlarÄ± sayfanÄ±n en altÄ±nda bulunan toplu gÃ¶rsel yÃ¼kleme alanÄ±na
                        yÃ¼klediÄŸiniz gÃ¶rsellerden seÃ§ilecektir.
                        <br>
                        ğŸ–¹ DoldurmadÄ±ÄŸÄ±nÄ±z metin alanlarÄ± varsayÄ±lan taslaktaki metinlerle doldurulacaktÄ±r.
                        <br>
                        âœ¨ HazÄ±r mesajlar iÃ§in tÄ±klayÄ±nÄ±z.
                    </p>
                </div>

                <section class="section-card">
                    <img src="/examples/on_kapak.jpg" class="section-img" alt="Ã–n Kapak">
                    <div class="section-content">
                        <h2 class="section-title text-rose-600">1. AÅŸkÄ±n BaÅŸlangÄ±cÄ± (Ã–n Kapak)</h2>
                        <div class="flex gap-4 mb-4">
                            <div class="drop-zone group" data-name="01_Sayfa">
                                <input type="file" name="01_Sayfa" class="hidden input-file" accept="image/*">
                                <div class="text-center z-0"><span class="text-2xl mb-1 block">ğŸ“¸</span><span
                                        class="text-[10px] font-bold text-slate-500 uppercase">Kapak</span></div>
                                <div class="preview-layer"></div>
                                <button class="delete-btn hidden"><svg width="14" height="14" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="3">
                                        <path d="M18 6 6 18" />
                                        <path d="m6 6 12 12" />
                                    </svg></button>
                            </div>
                            <!--
                            <div class="input-group">
                                <input type="text" name="Text_Ana_Baslik" placeholder="Kapak BaÅŸlÄ±ÄŸÄ± (Max 10)"
                                    maxlength="10" class="input-track">
                                <button type="button" class="magic-btn" onclick="openMagicModal('Text_Ana_Baslik')"
                                    title="HazÄ±r Mesaj">âœ¨</button>
                            </div>
                            -->
                        </div>
                    </div>
                </section>

                <section class="section-card">
                    <img src="/examples/yirtik_kagit_ ve_sayfa_2.jpg" class="section-img" alt="YÄ±rtÄ±k KaÄŸÄ±t">
                    <div class="section-content">
                        <h2 class="section-title text-orange-600">2. AnÄ±lar (Kesikli KaÄŸÄ±t)</h2>
                        <div class="flex flex-wrap gap-4 mb-4">
                            <div class="drop-zone group" data-name="03_Sayfa_1">
                                <input type="file" name="03_Sayfa_1" class="hidden input-file" accept="image/*">
                                <div class="text-center z-0"><span class="text-xl mb-1 block">ğŸ–¼ï¸</span><span
                                        class="text-[10px] font-bold text-slate-500">Foto 1</span></div>
                                <div class="preview-layer"></div>
                                <button class="delete-btn hidden"><svg width="14" height="14" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="3">
                                        <path d="M18 6 6 18" />
                                        <path d="m6 6 12 12" />
                                    </svg></button>
                            </div>
                            <div class="drop-zone group" data-name="03_Sayfa_2">
                                <input type="file" name="03_Sayfa_2" class="hidden input-file" accept="image/*">
                                <div class="text-center z-0"><span class="text-xl mb-1 block">ğŸ–¼ï¸</span><span
                                        class="text-[10px] font-bold text-slate-500">Foto 2</span></div>
                                <div class="preview-layer"></div>
                                <button class="delete-btn hidden"><svg width="14" height="14" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="3">
                                        <path d="M18 6 6 18" />
                                        <path d="m6 6 12 12" />
                                    </svg></button>
                            </div>
                        </div>
                        <div class="input-group">
                            <input type="text" name="Text_03_Sayfa" placeholder="KÄ±sa Not (Max 35)" maxlength="35"
                                class="input-track">
                            <button type="button" class="magic-btn" onclick="openMagicModal('Text_03_Sayfa')"
                                title="HazÄ±r Mesaj">âœ¨</button>
                        </div>
                    </div>
                </section>

                <section class="section-card">
                    <img src="/examples/film_seridi_1_ve_2.jpg" class="section-img" alt="Åerit 1">
                    <div class="section-content">
                        <h2 class="section-title text-indigo-600">3. Film Åeridi - BÃ¶lÃ¼m 1</h2>
                        <div class="flex gap-4 mb-4">
                            <div class="drop-zone group" data-name="06_Sayfa">
                                <input type="file" name="06_Sayfa" class="hidden input-file" accept="image/*">
                                <div class="text-center z-0"><span class="text-xl mb-1 block">ğŸï¸</span><span
                                        class="text-[10px] font-bold text-slate-500">Åerit</span></div>
                                <div class="preview-layer"></div>
                                <button class="delete-btn hidden"><svg width="14" height="14" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="3">
                                        <path d="M18 6 6 18" />
                                        <path d="m6 6 12 12" />
                                    </svg></button>
                            </div>
                            <div class="input-group">
                                <input type="text" name="Text_06_Sayfa" placeholder="Etiket (Max 10)" maxlength="10"
                                    class="input-track">
                                <button type="button" class="magic-btn" onclick="openMagicModal('Text_06_Sayfa')"
                                    title="HazÄ±r Mesaj">âœ¨</button>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="section-card">
                    <img src="/examples/film_seridi_1_ve_2.jpg" class="section-img" alt="Åerit 2">
                    <div class="section-content">
                        <h2 class="section-title text-indigo-600">4. Film Åeridi - BÃ¶lÃ¼m 2</h2>
                        <div class="flex gap-4 mb-4">
                            <div class="drop-zone group" data-name="07_Sayfa">
                                <input type="file" name="07_Sayfa" class="hidden input-file" accept="image/*">
                                <div class="text-center z-0"><span class="text-xl mb-1 block">ğŸï¸</span><span
                                        class="text-[10px] font-bold text-slate-500">Åerit</span></div>
                                <div class="preview-layer"></div>
                                <button class="delete-btn hidden"><svg width="14" height="14" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="3">
                                        <path d="M18 6 6 18" />
                                        <path d="m6 6 12 12" />
                                    </svg></button>
                            </div>
                            <div class="input-group">
                                <input type="text" name="Text_07_Sayfa" placeholder="Etiket (Max 10)" maxlength="10"
                                    class="input-track">
                                <button type="button" class="magic-btn" onclick="openMagicModal('Text_07_Sayfa')"
                                    title="HazÄ±r Mesaj">âœ¨</button>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="section-card">
                    <img src="/examples/spotify_ve_netflix.jpg" class="section-img" alt="Loveflix">
                    <div class="section-content">
                        <h2 class="section-title text-red-600">5. Bizim Filmimiz (Loveflix)</h2>
                        <div class="flex gap-4 mb-4">
                            <div class="drop-zone group" data-name="08_Sayfa">
                                <input type="file" name="08_Sayfa" class="hidden input-file" accept="image/*">
                                <div class="text-center z-0"><span class="text-xl mb-1 block">ğŸ¬</span><span
                                        class="text-[10px] font-bold text-slate-500">Posteri</span></div>
                                <div class="preview-layer"></div>
                                <button class="delete-btn hidden"><svg width="14" height="14" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="3">
                                        <path d="M18 6 6 18" />
                                        <path d="m6 6 12 12" />
                                    </svg></button>
                            </div>
                            <div class="flex-1 space-y-3">
                                <div class="input-group">
                                    <input type="text" name="Text_Film_Baslik" placeholder="Film BaÅŸlÄ±ÄŸÄ± (Max 24)"
                                        maxlength="24" class="input-track">
                                    <button type="button" class="magic-btn" onclick="openMagicModal('Text_Film_Baslik')"
                                        title="HazÄ±r Mesaj">âœ¨</button>
                                </div>
                                <input type="text" name="Text_Film_Turler" placeholder="TÃ¼r (Max 17)" maxlength="17"
                                    class="input-track">
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-3 mb-3">
                            <input type="text" name="Text_Film_Oyuncu_1" placeholder="Oyuncu 1 (Max 15)" maxlength="15"
                                class="input-track">
                            <input type="text" name="Text_Film_Oyuncu_2" placeholder="Oyuncu 2 (Max 15)" maxlength="15"
                                class="input-track">
                        </div>
                        <div class="input-group">
                            <input type="text" name="Text_Film_Aciklama" placeholder="Film Konusu (Max 320)"
                                maxlength="320" class="input-track">
                            <button type="button" class="magic-btn" onclick="openMagicModal('Text_Film_Aciklama')"
                                title="HazÄ±r Mesaj">âœ¨</button>
                        </div>
                    </div>
                </section>

                <section class="section-card">
                    <img src="/examples/spotify_ve_netflix.jpg" class="section-img" alt="Spotify">
                    <div class="section-content">
                        <h2 class="section-title text-green-600">6. Bizim ÅarkÄ±mÄ±z (Spotify)</h2>
                        <div class="flex gap-4 mb-4">
                            <div class="drop-zone group" data-name="09_Sayfa">
                                <input type="file" name="09_Sayfa" class="hidden input-file" accept="image/*">
                                <div class="text-center z-0"><span class="text-xl mb-1 block">ğŸµ</span><span
                                        class="text-[10px] font-bold text-slate-500">AlbÃ¼m</span></div>
                                <div class="preview-layer"></div>
                                <button class="delete-btn hidden"><svg width="14" height="14" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="3">
                                        <path d="M18 6 6 18" />
                                        <path d="m6 6 12 12" />
                                    </svg></button>
                            </div>
                            <div class="flex-1 space-y-3 self-center">
                                <input type="text" name="Text_Sarki_Ad" placeholder="ÅarkÄ± AdÄ± (Max 17)" maxlength="17"
                                    class="input-track">
                                <input type="text" name="Text_Sarki_Sanatci" placeholder="SanatÃ§Ä± (Max 26)"
                                    maxlength="26" class="input-track">
                            </div>
                        </div>
                    </div>
                </section>

                <section class="section-card">
                    <img src="/examples/kamera_ve_selfie.jpg" class="section-img" alt="Kamera">
                    <div class="section-content">
                        <h2 class="section-title text-slate-700">7. Kamera ArkasÄ± (10. Sayfa)</h2>
                        <div class="drop-zone w-32 h-32 group" data-name="10_Sayfa">
                            <input type="file" name="10_Sayfa" class="hidden input-file" accept="image/*">
                            <div class="text-center z-0"><span class="text-3xl mb-1 block">ğŸ“·</span><span
                                    class="text-[10px] font-bold text-slate-500">FotoÄŸraf</span></div>
                            <div class="preview-layer"></div>
                            <button class="delete-btn hidden"><svg width="14" height="14" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="3">
                                    <path d="M18 6 6 18" />
                                    <path d="m6 6 12 12" />
                                </svg></button>
                        </div>
                    </div>
                </section>

                <section class="section-card">
                    <img src="/examples/kamera_ve_selfie.jpg" class="section-img" alt="Selfie">
                    <div class="section-content">
                        <h2 class="section-title text-rose-500">8. Selfie ZamanÄ± (11. Sayfa)</h2>
                        <div class="drop-zone w-32 h-32 group" data-name="11_Sayfa">
                            <input type="file" name="11_Sayfa" class="hidden input-file" accept="image/*">
                            <div class="text-center z-0"><span class="text-3xl mb-1 block">ğŸ¤³</span><span
                                    class="text-[10px] font-bold text-slate-500">Selfie</span></div>
                            <div class="preview-layer"></div>
                            <button class="delete-btn hidden"><svg width="14" height="14" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="3">
                                    <path d="M18 6 6 18" />
                                    <path d="m6 6 12 12" />
                                </svg></button>
                        </div>
                    </div>
                </section>

                <section class="section-card">
                    <img src="/examples/film_tuneli_1_ve_2.jpg" class="section-img" alt="Film TÃ¼neli 1">
                    <div class="section-content">
                        <h2 class="section-title text-purple-600">9. Zaman TÃ¼neli - BÃ¶lÃ¼m 1</h2>
                        <div class="flex gap-4 mb-4">
                            <div class="drop-zone group" data-name="14_Sayfa">
                                <input type="file" name="14_Sayfa" class="hidden input-file" accept="image/*">
                                <div class="text-center z-0"><span class="text-xl mb-1 block">ğŸï¸</span><span
                                        class="text-[10px] font-bold text-slate-500">TÃ¼nel</span></div>
                                <div class="preview-layer"></div>
                                <button class="delete-btn hidden"><svg width="14" height="14" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="3">
                                        <path d="M18 6 6 18" />
                                        <path d="m6 6 12 12" />
                                    </svg></button>
                            </div>
                            <div class="input-group">
                                <input type="text" name="Text_14_Sayfa_Ust" placeholder="BÃ¶lÃ¼m BaÅŸlÄ±ÄŸÄ± (Max 23)"
                                    maxlength="23" class="input-track">
                                <button type="button" class="magic-btn" onclick="openMagicModal('Text_14_Sayfa_Ust')"
                                    title="HazÄ±r Mesaj">âœ¨</button>
                            </div>
                        </div>
                        <div class="input-group">
                            <textarea name="Text_14_Sayfa_Alt" placeholder="Bu anÄ±n hikayesi nedir? (Max 150)"
                                maxlength="150" rows="2" class="input-track resize-none"></textarea>
                            <button type="button" class="magic-btn h-full" onclick="openMagicModal('Text_14_Sayfa_Alt')"
                                title="HazÄ±r Mesaj">âœ¨</button>
                        </div>
                    </div>
                </section>

                <section class="section-card">
                    <img src="/examples/film_tuneli_1_ve_2.jpg" class="section-img" alt="Film TÃ¼neli 2">
                    <div class="section-content">
                        <h2 class="section-title text-purple-600">10. Zaman TÃ¼neli - BÃ¶lÃ¼m 2</h2>
                        <div class="flex gap-4 mb-4">
                            <div class="drop-zone group" data-name="15_Sayfa">
                                <input type="file" name="15_Sayfa" class="hidden input-file" accept="image/*">
                                <div class="text-center z-0"><span class="text-xl mb-1 block">ğŸï¸</span><span
                                        class="text-[10px] font-bold text-slate-500">TÃ¼nel</span></div>
                                <div class="preview-layer"></div>
                                <button class="delete-btn hidden"><svg width="14" height="14" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="3">
                                        <path d="M18 6 6 18" />
                                        <path d="m6 6 12 12" />
                                    </svg></button>
                            </div>
                            <div class="input-group">
                                <input type="text" name="Text_15_Sayfa_Ust" placeholder="BÃ¶lÃ¼m BaÅŸlÄ±ÄŸÄ± (Max 23)"
                                    maxlength="23" class="input-track">
                                <button type="button" class="magic-btn" onclick="openMagicModal('Text_15_Sayfa_Ust')"
                                    title="HazÄ±r Mesaj">âœ¨</button>
                            </div>
                        </div>
                        <div class="input-group">
                            <textarea name="Text_15_Sayfa_Alt" placeholder="Peki ya sonra ne oldu? (Max 150)"
                                maxlength="150" rows="2" class="input-track resize-none"></textarea>
                            <button type="button" class="magic-btn h-full" onclick="openMagicModal('Text_15_Sayfa_Alt')"
                                title="HazÄ±r Mesaj">âœ¨</button>
                        </div>
                    </div>
                </section>

                <section class="section-card">
                    <img src="/examples/arka_kapak.jpg" class="section-img" alt="Arka Kapak">
                    <div class="section-content">
                        <h2 class="section-title text-rose-600">11. Mutlu Son (Arka Kapak)</h2>
                        <div class="flex gap-4 mb-4">
                            <div class="drop-zone group" data-name="16_Sayfa">
                                <input type="file" name="16_Sayfa" class="hidden input-file" accept="image/*">
                                <div class="text-center z-0"><span class="text-2xl mb-1 block">ğŸ</span><span
                                        class="text-[10px] font-bold text-slate-500 uppercase">Son!</span></div>
                                <div class="preview-layer"></div>
                                <button class="delete-btn hidden"><svg width="14" height="14" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="3">
                                        <path d="M18 6 6 18" />
                                        <path d="m6 6 12 12" />
                                    </svg></button>
                                <!--
                            </div>
                            <div class="input-group">
                                <input type="text" name="Text_Arka_Baslik" placeholder="KapanÄ±ÅŸ SÃ¶zÃ¼ (Max 10)"
                                    maxlength="10" class="input-track">
                                <button type="button" class="magic-btn" onclick="openMagicModal('Text_Arka_Baslik')"
                                    title="HazÄ±r Mesaj">âœ¨</button>
                            </div>
                            -->
                            </div>
                        </div>

                </section>

                <section
                    class="section-card bg-orange-50/50 border-orange-100 flex-col md:flex-col items-center text-center p-8">
                    <h2 class="text-2xl font-bold text-slate-800 mb-2">12. DiÄŸer FotoÄŸraflarÄ±nÄ±z Buraya <span
                            class="text-red-600">*</span></h2>
                    <p class="text-slate-500 mb-2 max-w-lg">KitabÄ±n geri kalanÄ± iÃ§in en gÃ¼zel anÄ±larÄ±nÄ±zdan <strong
                            class="text-orange-600">15-60 adet</strong> fotoÄŸraf seÃ§in.</p>
                    <p class="text-sm text-red-600 font-bold mb-6">âš ï¸ ZORUNLU: Minimum 15, maksimum 60 fotoÄŸraf
                        yÃ¼klemelisiniz</p>

                    <div class="relative bg-white w-full max-w-md aspect-video rounded-xl border-2 border-dashed border-orange-300 shadow-sm flex flex-col items-center justify-center cursor-pointer hover:bg-orange-50 hover:border-orange-500 transition group"
                        id="bulkDropZone">
                        <input type="file" name="12_Genel_Photos" multiple
                            class="absolute inset-0 opacity-0 cursor-pointer z-10" id="bulkInput" accept="image/*">
                        <span class="text-5xl mb-3 block group-hover:scale-110 transition">ğŸ“‚</span>
                        <span
                            class="px-6 py-2 bg-orange-600 text-white font-bold rounded-full text-sm shadow-md group-hover:bg-orange-700 transition">Toplu
                            FotoÄŸraf SeÃ§</span>
                        <p id="bulkCount" class="mt-4 font-bold text-slate-800 text-lg hidden">0 Dosya SeÃ§ildi</p>
                        <p id="bulkStatus" class="mt-2 text-sm text-slate-500 hidden"></p>
                    </div>
                </section>

                <button type="submit"
                    class="w-full bg-slate-900 text-white font-bold py-6 rounded-2xl text-xl shadow-xl hover:bg-orange-600 hover:scale-[1.005] transition duration-300 flex items-center justify-center gap-3">
                    âœ¨ KitabÄ±mÄ± Ve AnÄ±larÄ±mÄ± OluÅŸtur
                </button>

            </form>
        </div>
    </div>

    <script>
        // ============================================
        // 1. TOKEN VE MÃœÅTERÄ° DOÄRULAMA (EPIC 3 - Token System)
        // ============================================
        (function initToken() {
            const urlPath = window.location.pathname;
            // URL sonundaki token'Ä± yakala (/o/TOKEN_KODU)
            const tokenMatch = urlPath.match(/\/o\/([a-f0-9]+)$/);

            if (tokenMatch && tokenMatch[1]) {
                const token = tokenMatch[1];
                const tokenInput = document.getElementById('tokenField');
                const infoText = document.getElementById('tokenInfo');

                if (tokenInput) tokenInput.value = token;
                if (infoText) infoText.classList.remove('hidden');

                // Backend API'den mÃ¼ÅŸteri verisini Ã§ek (Epic 3.2)
                fetch(`/api/token/${token}`)
                    .then(res => res.json())
                    .then(result => {
                        if (result.success) {
                            const nameField = document.getElementById('customerNameField');
                            if (nameField) {
                                nameField.value = result.customerName;
                                nameField.setAttribute('readonly', true);
                                nameField.classList.add('bg-slate-100', 'cursor-not-allowed');
                                // Progress bar'Ä±n gÃ¼ncellenmesi iÃ§in input event tetikle
                                nameField.dispatchEvent(new Event('input', { bubbles: true }));
                            }
                            console.log('âœ“ Token baÅŸarÄ±yla doÄŸrulandÄ±: ' + result.customerName);
                        } else {
                            console.error('Token hatasÄ±:', result.error);
                            // Token geÃ§ersizse kullanÄ±cÄ± uyarÄ±labilir veya yÃ¶nlendirilebilir
                        }
                    })
                    .catch(err => {
                        console.error('API BaÄŸlantÄ± HatasÄ±:', err);
                    });
            }
        })();

        // ============================================
        // 2. GLOBAL FONKSÄ°YONLAR (Issue #3 Fix: Global Scope)
        // ============================================

        const MESSAGE_TEMPLATES = {
            "Text_Ana_Baslik": {
                romantic: ["Sonsuz AÅŸk", "Ruh EÅŸim", "Bizimkisi", "AÅŸk", "CanÄ±m", "Sevdam", "Huzurum", "MiladÄ±m", "Tek GerÃ§ek", "Sol YanÄ±m"],
                emotional: ["Mucizem", "Nefesim", "Ã–mrÃ¼m", "Ä°yi ki...", "KÄ±ymetlim", "Her Åeyim", "DÃ¼nyam", "MeleÄŸim", "Can Ã–zÃ¼m", "HayatÄ±m"],
                funny: ["BaÅŸ Belam", "Patron", "Olay Var", "TÄ±marhane", "Vukuat", "SuÃ§ Ortak", "GÄ±cÄ±k", "BelalÄ±m", "ÅapÅŸik", "Kedik"]
            },
            "Text_03_Sayfa": {
                romantic: ["Sen benim en gÃ¼zel manzaramsÄ±n.", "GÃ¼lÃ¼ÅŸÃ¼n dÃ¼nyaya bedel.", "Sonsuza kadar sadece sen.", "Kalbim senin evin olsun.", "Her ÅŸey seninle gÃ¼zel.", "AÅŸk, senin adÄ±n.", "GÃ¶zlerin Ã¶mre bedel.", "Seninle atan kalbim var.", "DÃ¼nyam sensin sevgilim.", "Seni seviyorum."],
                emotional: ["BazÄ± ruhlar evvelden aÅŸinadÄ±r.", "YanÄ±nda zaman dursun istiyorum.", "Sen benim kabul olmuÅŸ duamsÄ±n.", "VarlÄ±ÄŸÄ±n bana en bÃ¼yÃ¼k hediye.", "Sensiz bir an bile zor.", "Kalbimde yerin hep ayrÄ±.", "Huzurun ta kendisisin.", "Ä°yi ki doÄŸdun yÃ¼reÄŸime.", "Seninle geÃ§en her an lÃ¼tuf.", "Eksik parÃ§am sensin."],
                funny: ["Beni benden alÄ±rsan seni...", "Yemekten sonra en sevdiÄŸimsin.", "Åifresi Ã§Ã¶zÃ¼lemeyen tek sÄ±rrÄ±m.", "Birlikteyken diyet bozulur.", "TatlÄ±m, tuzlum, ekÅŸim.", "Seninle delirmek gÃ¼zel.", "GÄ±cÄ±k ama benim gÄ±cÄ±ÄŸÄ±m.", "Kapat gÃ¶zlerini, sev beni.", "AÅŸk karÄ±n doyurmaz ama...", "ArÄ±zalÄ± bir aÅŸk bizimkisi."]
            },
            "Text_06_Sayfa": {
                romantic: ["Huzurum", "Nefesim", "Sol yanÄ±m", "Sonsuzum", "AÅŸkÄ±m", "Sevgilim", "Bitanem", "HerÅŸeyim", "MeleÄŸim", "CanÄ±m"],
                emotional: ["Can Ã¶zÃ¼m", "KÄ±ymetlim", "Her ÅŸeyim", "Mevsimim", "Yuvam", "Ã–mrÃ¼m", "Kalbime", "Ruhum", "Cennetim", "Nefes"],
                funny: ["BelalÄ±m", "GÄ±cÄ±k", "Oburum", "Kedik", "ÅapÅŸik", "Deli", "LazÄ±m", "KÄ±smet", "Patron", "ZalÄ±m"]
            },
            "Text_07_Sayfa": {
                romantic: ["Bir Ã–mÃ¼r", "Seninle", "Daima", "Tutkum", "MeleÄŸim", "Prenses", "Prens", "AÅŸk", "Kalp", "Biricik"],
                emotional: ["Kalbimin", "DÃ¼nyam", "HayatÄ±m", "GÃ¼neÅŸim", "Mucizem", "YÄ±ldÄ±zÄ±m", "Gecem", "GÃ¼ndÃ¼z", "Tekim", "Sevdam"],
                funny: ["Zehirli Ok", "SuÃ§ OrtaÄŸÄ±", "TÄ±marhane", "Vukuat", "Patron", "Åef", "MÃ¼dÃ¼r", "Olay", "Fena", "Bomba"]
            },
            "Text_Film_Baslik": {
                romantic: ["AÅŸkÄ±mÄ±zÄ±n Filmi", "Sonsuz Senaryo", "Bizim Hikayemiz", "En GÃ¼zel Sahnemiz", "Romantik Komedimiz", "AÅŸk TesadÃ¼fleri Sever", "Mutluluk ZamanÄ±", "Sadece Sen ve Ben", "HayatÄ±mÄ±n BaÅŸrolÃ¼", "Unutulmaz Anlar"],
                emotional: ["Kalbimdeki Ä°mza", "Sessiz Ã‡Ä±ÄŸlÄ±k", "Derin Bir BakÄ±ÅŸ", "Yol ArkadaÅŸÄ±m", "Hayat AÄŸacÄ±m", "Kader BaÄŸÄ±m", "Ruhumun AynasÄ±", "Beklenen GÃ¼n", "Sevgi Yolu", "Umut IÅŸÄ±ÄŸÄ±"],
                funny: ["Evde Tek BaÅŸÄ±na Biz", "Yine Mi Sen?", "Eyvah AÅŸk Geldi", "Ã‡Ä±lgÄ±n AÅŸÄ±klar", "Deli ile Veli", "Tencere Kapak", "AÅŸk Grevi", "TatlÄ± Bela", "Firari AÅŸk", "Komedi DÃ¼kkanÄ±"]
            },
            "Text_Film_Aciklama": {
                romantic: ["SÄ±radan bir gÃ¼nÃ¼n, hayatÄ±mÄ±n en gÃ¼zel hikayesine dÃ¶nÃ¼ÅŸtÃ¼ÄŸÃ¼ o an... Seninle baÅŸlayan her gÃ¼n, mutlu sonla biten bir film gibi. Sen benim baÅŸrolÃ¼m, yÃ¶netmenim ve en sadÄ±k izleyicimsin. Bu film hiÃ§ bitmesin.", "GÃ¶zlerinde kaybolduÄŸum, her karesinde aÅŸkÄ± yeniden keÅŸfettiÄŸim bir serÃ¼ven. Bu hikaye hiÃ§ bitmesin, jenerik hiÃ§ akmasÄ±n istiyorum. Seni Ã§ok seviyorum. Birlikte nice gÃ¼zel bÃ¶lÃ¼mlere."],
                emotional: ["Bazen kelimeler yetmez, sadece bakÄ±ÅŸlar konuÅŸur. HayatÄ±mÄ±n en zor anlarÄ±nda elimi tutan, en mutlu anlarÄ±mda kahkahama ortak olan canÄ±m sevgilim. Ä°yi ki yollarÄ±mÄ±z kesiÅŸti.", "Bir tesadÃ¼fÃ¼n hayatÄ±mÄ± nasÄ±l deÄŸiÅŸtirdiÄŸinin kanÄ±tÄ±. Seninle geÃ§en her saniye, Ã¶mrÃ¼me Ã¶mÃ¼r katÄ±yor. VarlÄ±ÄŸÄ±na her gÃ¼n ÅŸÃ¼krediyorum. Sen benim en gÃ¼zel iyikimsin."],
                funny: ["Romantik komedi tadÄ±nda bir hayatÄ±mÄ±z var. Bazen kavga, bazen gÃ¼rÃ¼ltÃ¼ ama bolca kahkaha! Oscar Ã¶dÃ¼lÃ¼ alamayÄ±z belki ama 'En Ä°yi Ã‡ift' Ã¶dÃ¼lÃ¼ kesinlikle bizim. MÄ±sÄ±rlarÄ± hazÄ±rlayÄ±n!", "BaÅŸrolde dÃ¼nyanÄ±n en gÃ¼zel/yakÄ±ÅŸÄ±klÄ± insanÄ± ve onun kaprisini Ã§eken ben! Åaka bir yana, seninle aksiyon da gÃ¼zel, dram da. Ama en Ã§ok komedi yakÄ±ÅŸÄ±yor bize."]
            },
            "Text_14_Sayfa_Ust": {
                romantic: ["Zaman Durdu", "AÅŸk TÃ¼neli", "GeÃ§miÅŸten GeleceÄŸe", "Unutulmaz An", "Ä°lk BakÄ±ÅŸ", "O GÃ¼n", "Sihirli An", "Bizim Saatimiz", "Milat", "BaÅŸlangÄ±Ã§"],
                emotional: ["HatÄ±ralar", "Ä°z BÄ±rakan", "Kalbe Dokunan", "DÃ¶nÃ¼m NoktasÄ±", "GÃ¶zyaÅŸÄ± ve GÃ¼lÃ¼ÅŸ", "KÄ±ymetli", "Ã–zel GÃ¼n", "SaklÄ± An", "Derin", "Hisli"],
                funny: ["O GÃ¼n Ne Yedik?", "KarnÄ±mÄ±z AÃ§tÄ±", "GÃ¼lmekten Ã–ldÃ¼k", "Tipimize Bak", "Åaka Gibi", "Komik An", "Yine Olay", "Firarda", "YakalandÄ±k", "Ofise DÃ¶nÃ¼ÅŸ"]
            },
            "Text_14_Sayfa_Alt": {
                romantic: ["Zaman tÃ¼nelinde kaybolsam, yine seni bulurdum. GeÃ§miÅŸim de sensin, geleceÄŸim de. Seninle geÃ§en her saniye Ã§ok deÄŸerli.", "Seninle geÃ§en her an, hafÄ±zama kazÄ±nan en deÄŸerli hazine. Ä°yi ki varsÄ±n, iyi ki seni tanÄ±dÄ±m."],
                emotional: ["BaktÄ±kÃ§a iÃ§imin titrediÄŸi o anlar... Geriye dÃ¶nÃ¼p baktÄ±ÄŸÄ±mda 'Ä°yi ki' dediÄŸim tek ÅŸeysin. Seni tanÄ±mak en bÃ¼yÃ¼k ÅŸansÄ±m.", "Hayat kÄ±sa, kuÅŸlar uÃ§uyor ve ben seni her geÃ§en gÃ¼n daha Ã§ok seviyorum. Bu fotoÄŸraf aÅŸkÄ±mÄ±zÄ±n tanÄ±ÄŸÄ±."],
                funny: ["BakÄ±ÅŸlara bak, sanki dÃ¼nyayÄ± kurtarmÄ±ÅŸÄ±z. Halbuki sadece acÄ±kmÄ±ÅŸtÄ±k. Ne gÃ¼nlerdi ama!", "Bu fotoÄŸrafta ne kadar gÃ¼zel Ã§Ä±kmÄ±ÅŸsÄ±n, ben de fena deÄŸilim hani! Yine karizmamÄ±z yerinde."]
            },
            "Text_15_Sayfa_Ust": {
                romantic: ["GeleceÄŸimiz", "Sonsuzluk", "YarÄ±nlar Bizim", "Hayallerimiz", "Birlikte", "El Ele", "Yolumuz Bir", "AydÄ±nlÄ±k", "Umut", "Sevgi"],
                emotional: ["Umut Dolu", "Dua Gibi", "GÃ¼ven", "Sadakat", "BaÄŸlÄ±lÄ±k", "SÃ¶zÃ¼mÃ¼z", "Yemin", "Kader", "AlÄ±nyazÄ±sÄ±", "Ä°nanÃ§"],
                funny: ["Zengin OlacaÄŸÄ±z", "Diyet BaÅŸlÄ±yor", "Spor ZamanÄ±", "Gezginler", "Yine Yemek", "Uyku Vakti", "Proje", "Planlar", "KaÃ§Ä±ÅŸ", "Tatil"]
            },
            "Text_15_Sayfa_Alt": {
                romantic: ["YarÄ±nlar seninle gÃ¼zel. Elim elinde olduÄŸu sÃ¼rece her yolun sonu Ã§iÃ§ekli bahÃ§e. Seni Ã§ok seviyorum.", "Sadece bugÃ¼n deÄŸil, son nefesime kadar yanÄ±ndayÄ±m. Seni Ã§ok seviyorum, iyi ki hayatÄ±mdasÄ±n."],
                emotional: ["Sen benim gÃ¼venli limanÄ±m, fÄ±rtÄ±nada sÄ±ÄŸÄ±ndÄ±ÄŸÄ±m tek yersin. VarlÄ±ÄŸÄ±n gÃ¼Ã§ veriyor sevgilim.", "Bir fotoÄŸraf karesine sÄ±ÄŸmayan kocaman bir aÅŸk bizimkisi. Ä°yi ki biz olduk, iyi ki birbirimizi bulduk."],
                funny: ["Birlikte yaÅŸlanacaÄŸÄ±z dedik, yaÅŸlanÄ±yoruz da... Ama hala Ã§ok genciz be! Ruhumuz 18 hala.", "Gelecekte torunlara gÃ¶sterip 'Dedemiz ne yakÄ±ÅŸÄ±klÄ±ymÄ±ÅŸ' dedirteceÄŸimiz o kare. Sakla bunu!"]
            },
            "Text_Arka_Baslik": {
                romantic: ["Sonsuza", "AÅŸkla Kal", "Mutlu Son", "Biz", "Daima", "Bitmedi", "En BaÅŸtan", "Sen & Ben", "Huzur", "Sevgiyle"],
                emotional: ["Unutma", "Kalbimdesin", "Ã–zlemle", "DualarÄ±m", "ÅÃ¼kÃ¼r", "Tek Ã‡are", "SaygÄ±yla", "HoÅŸÃ§akal", "Emanet", "Can"],
                funny: ["The End", "Bitti", "DaÄŸÄ±lÄ±n", "Perde", "Kestik", "Film Bitti", "Yemek?", "Uyku", "Son", "Devam..."]
            }
        };

        let currentInputName = '';
        let currentCategory = 'romantic';

        function openMagicModal(inputName) {
            if (!MESSAGE_TEMPLATES[inputName]) {
                if (inputName.includes('Oyuncu')) {
                    alert("Oyuncu isimleri kiÅŸiseldir, lÃ¼tfen elle giriniz.");
                    return;
                }
                alert("Bu alan iÃ§in hazÄ±r mesaj bulunmuyor.");
                return;
            }

            currentInputName = inputName;
            const modalTargetName = document.getElementById('modalTargetName');
            if (modalTargetName) {
                modalTargetName.innerText = inputName;
                modalTargetName.classList.remove('hidden');
            }

            document.getElementById('magicModal').classList.remove('hidden');
            document.getElementById('magicModal').style.display = 'flex';
            switchTab('romantic');
        }

        function closeMagicModal() {
            document.getElementById('magicModal').classList.add('hidden');
            document.getElementById('magicModal').style.display = 'none';
        }

        function switchTab(category) {
            currentCategory = category;

            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.innerText.toLowerCase().includes(category === 'romantic' ? 'romantik' : category === 'emotional' ? 'duygusal' : 'komik')) {
                    btn.classList.add('active');
                }
            });

            const list = document.getElementById('suggestionList');
            list.innerHTML = '';

            const messages = MESSAGE_TEMPLATES[currentInputName] ? MESSAGE_TEMPLATES[currentInputName][category] : [];

            if (messages && messages.length > 0) {
                messages.forEach(msg => {
                    const div = document.createElement('div');
                    div.className = 'suggestion-chip';
                    div.innerText = msg;
                    div.onclick = () => selectMessage(msg);
                    list.appendChild(div);
                });
            } else {
                list.innerHTML = '<p class="text-center text-slate-400 p-4">Bu kategori iÃ§in mesaj yok.</p>';
            }
        }

        function selectMessage(text) {
            const input = document.querySelector(`[name="${currentInputName}"]`);
            if (input) {
                const maxLength = input.getAttribute('maxlength');
                if (maxLength && text.length > parseInt(maxLength)) {
                    alert(`Bu mesaj Ã§ok uzun! (${text.length} karakter). Bu alan en fazla ${maxLength} karakter alabilir.`);
                    return;
                }

                input.value = text;
                // Progress Bar ve SayaÃ§larÄ± gÃ¼ncelle
                input.dispatchEvent(new Event('input', { bubbles: true }));
                closeMagicModal();
            }
        }

        // ============================================
        // 3. DOM YÃœKLENDÄ°KTEN SONRA Ã‡ALIÅACAKLAR
        // ============================================
        document.addEventListener('DOMContentLoaded', function () {

            // Modal dÄ±ÅŸÄ±na tÄ±klama
            const magicModal = document.getElementById('magicModal');
            if (magicModal) {
                magicModal.addEventListener('click', (e) => {
                    if (e.target === magicModal) closeMagicModal();
                });
            }

            // Karakter SayacÄ±
            document.querySelectorAll('.input-track').forEach(input => {
                input.addEventListener('input', function () {
                    const maxLength = this.getAttribute('maxlength');
                    if (!maxLength) return;
                    const currentLength = this.value.length;

                    let counter = this.parentElement.querySelector('.char-counter');
                    if (!counter) {
                        counter = document.createElement('span');
                        counter.className = 'char-counter text-xs text-slate-400 absolute right-2 bottom-[-20px]';
                        this.parentElement.style.position = 'relative';
                        this.parentElement.appendChild(counter);
                    }

                    counter.textContent = `${currentLength}/${maxLength}`;
                    counter.style.color = currentLength > maxLength * 0.9 ? '#ef4444' : '#64748b';
                });
            });

            // Dosya YÃ¶netimi (Drop Zones) - Epic 2 (Upload Security)
            const MAX_FILE_SIZE = 20 * 1024 * 1024; // 20MB SÄ±nÄ±rÄ±
            const MIN_BULK_FILES = 15; // Minimum toplu yÃ¼kleme dosya sayÄ±sÄ±
            const MAX_BULK_FILES = 60; // Maksimum toplu yÃ¼kleme dosya sayÄ±sÄ±

            document.querySelectorAll('.drop-zone').forEach(zone => {
                const input = zone.querySelector('input');
                const preview = zone.querySelector('.preview-layer');
                const delBtn = zone.querySelector('.delete-btn');

                zone.addEventListener('click', (e) => {
                    if (e.target !== delBtn && !delBtn.contains(e.target)) input.click();
                });

                input.addEventListener('change', () => {
                    if (input.files && input.files[0]) handleFile(input.files[0], preview, delBtn, input);
                });

                delBtn.addEventListener('click', (e) => {
                    e.preventDefault(); e.stopPropagation();
                    input.value = "";
                    preview.style.backgroundImage = 'none';
                    preview.style.opacity = '0';
                    delBtn.classList.add('hidden');
                    updateProgress();
                });

                zone.addEventListener('dragover', (e) => { e.preventDefault(); zone.classList.add('drag-over'); });
                ['dragleave', 'dragend', 'drop'].forEach(evt => {
                    zone.addEventListener(evt, (e) => { e.preventDefault(); zone.classList.remove('drag-over'); });
                });
                zone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    if (e.dataTransfer.files.length) {
                        input.files = e.dataTransfer.files;
                        handleFile(e.dataTransfer.files[0], preview, delBtn, input);
                    }
                });
            });

            function handleFile(file, preview, delBtn, input) {
                if (!file) return;
                if (file.size > MAX_FILE_SIZE) {
                    alert("UyarÄ±: Bu fotoÄŸraf Ã§ok bÃ¼yÃ¼k! (20MB+). LÃ¼tfen daha kÃ¼Ã§Ã¼ÄŸÃ¼nÃ¼ seÃ§in.");
                    input.value = "";
                    return;
                }
                const reader = new FileReader();
                reader.onload = (e) => {
                    preview.style.backgroundImage = `url('${e.target.result}')`;
                    preview.style.opacity = '1';
                    delBtn.classList.remove('hidden');
                    updateProgress();
                };
                reader.readAsDataURL(file);
            }

            // Toplu YÃ¼kleme (Bulk) - Enhanced validation and feedback
            const bulkInput = document.getElementById('bulkInput');
            if (bulkInput) {
                bulkInput.addEventListener('change', () => {
                    const files = Array.from(bulkInput.files);
                    const countLabel = document.getElementById('bulkCount');
                    const statusLabel = document.getElementById('bulkStatus');

                    // Clear any previous selections if validation fails
                    let validationPassed = true;

                    // Check if user selected files
                    if (files.length === 0) {
                        countLabel.classList.add('hidden');
                        statusLabel.classList.add('hidden');
                        return;
                    }

                    // Minimum dosya sayÄ±sÄ± kontrolÃ¼  
                    if (files.length < MIN_BULK_FILES) {
                        alert(`âš ï¸ YETERSÄ°Z FOTOÄRAF!\n\nâœ— SeÃ§tiÄŸiniz: ${files.length} fotoÄŸraf\nâœ“ Minimum gerekli: ${MIN_BULK_FILES} fotoÄŸraf\n\nLÃ¼tfen en az ${MIN_BULK_FILES} fotoÄŸraf seÃ§in.`);
                        bulkInput.value = "";
                        countLabel.classList.add('hidden');
                        statusLabel.classList.add('hidden');
                        validationPassed = false;
                        return;
                    }

                    // Maksimum dosya sayÄ±sÄ± kontrolÃ¼
                    if (files.length > MAX_BULK_FILES) {
                        alert(`âš ï¸ Ã‡OK FAZLA FOTOÄRAF!\n\nâœ— SeÃ§tiÄŸiniz: ${files.length} fotoÄŸraf\nâœ“ Maksimum izin verilen: ${MAX_BULK_FILES} fotoÄŸraf\n\nLÃ¼tfen ${MAX_BULK_FILES} veya daha az fotoÄŸraf seÃ§in.`);
                        bulkInput.value = "";
                        countLabel.classList.add('hidden');
                        statusLabel.classList.add('hidden');
                        validationPassed = false;
                        return;
                    }

                    // Dosya boyutu kontrolÃ¼
                    const oversizedFiles = files.filter(f => f.size > MAX_FILE_SIZE);
                    if (oversizedFiles.length > 0) {
                        const oversizedList = oversizedFiles.map(f => `â€¢ ${f.name} (${(f.size / 1024 / 1024).toFixed(2)} MB)`).join('\n');
                        alert(`âš ï¸ BÃœYÃœK DOSYA TESPÄ°T EDÄ°LDÄ°!\n\n${oversizedFiles.length} fotoÄŸraf 20MB sÄ±nÄ±rÄ±nÄ± aÅŸÄ±yor:\n\n${oversizedList}\n\nLÃ¼tfen bu fotoÄŸraflarÄ± sÄ±kÄ±ÅŸtÄ±rÄ±n veya daha kÃ¼Ã§Ã¼klerini seÃ§in.`);
                        bulkInput.value = "";
                        countLabel.classList.add('hidden');
                        statusLabel.classList.add('hidden');
                        validationPassed = false;
                        return;
                    }

                    // All validations passed!
                    if (validationPassed) {
                        countLabel.innerText = `âœ… ${files.length} FotoÄŸraf SeÃ§ildi`;
                        countLabel.classList.remove('hidden');
                        countLabel.classList.remove('text-red-600');
                        countLabel.classList.add('text-green-600');

                        statusLabel.innerText = `ğŸ“¸ ${MIN_BULK_FILES}-${MAX_BULK_FILES} aralÄ±ÄŸÄ±nda, mÃ¼kemmel!`;
                        statusLabel.classList.remove('hidden');
                        statusLabel.classList.remove('text-red-500');
                        statusLabel.classList.add('text-green-600');

                        console.log(`âœ… Bulk upload validated: ${files.length} files`);
                        updateProgress();
                    }
                });
            }

            // Progress Bar (Issue #4 ve UX)
            window.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' && e.target.nodeName !== 'TEXTAREA') e.preventDefault();
            });

            function updateProgress() {
                const inputs = document.querySelectorAll('.input-track');
                const fileInputs = document.querySelectorAll('.input-file');
                let total = inputs.length + fileInputs.length;
                if (bulkInput) total += 1;

                let filled = 0;
                inputs.forEach(i => { if (i.value.trim() !== '') filled++; });
                fileInputs.forEach(i => { if (i.files.length > 0) filled++; });
                if (bulkInput && bulkInput.files.length > 0) filled++;

                const percent = total > 0 ? Math.round((filled / total) * 100) : 0;
                const progBar = document.getElementById('progressBar');
                const progText = document.getElementById('progressText');

                if (progBar) progBar.style.width = `${percent}%`;
                if (progText) progText.innerText = `${percent}%`;
            }
            document.querySelectorAll('input, textarea').forEach(i => i.addEventListener('input', updateProgress));

            // FORM GÃ–NDERME (autoForm ID'si kullanÄ±larak)
            const form = document.getElementById('autoForm');
            if (form) {
                form.addEventListener('submit', async function (e) {
                    e.preventDefault();

                    // Client-Side Validation (Epic 2)
                    const customerNameInput = document.querySelector('[name="musteri_adi"]');
                    if (!customerNameInput || !customerNameInput.value.trim()) {
                        alert("âš ï¸ MÃ¼ÅŸteri adÄ± zorunludur!");
                        customerNameInput?.focus();
                        return;
                    }

                    // âš ï¸ CRITICAL: Validate bulk upload - MANDATORY!
                    const bulkInput = document.getElementById('bulkInput');
                    if (!bulkInput || !bulkInput.files || bulkInput.files.length === 0) {
                        alert(`âš ï¸ TOPLU FOTOÄRAF YÃœKLEME ZORUNLUDUR!\n\nLÃ¼tfen en az ${MIN_BULK_FILES} fotoÄŸraf yÃ¼kleyin.\n\nTÃ¼m anÄ±larÄ±nÄ±zÄ± paylaÅŸmanÄ±z iÃ§in bu alan zorunludur.`);
                        document.getElementById('bulkDropZone')?.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        return;
                    }

                    const fileCount = bulkInput.files.length;
                    if (fileCount < MIN_BULK_FILES || fileCount > MAX_BULK_FILES) {
                        alert(`âš ï¸ TOPLU FOTOÄRAF SAYISI GEÃ‡ERSÄ°Z!\n\nâœ— Åu an: ${fileCount} fotoÄŸraf seÃ§ili\nâœ“ Minimum: ${MIN_BULK_FILES} fotoÄŸraf\nâœ“ Maksimum: ${MAX_BULK_FILES} fotoÄŸraf\n\nLÃ¼tfen ${MIN_BULK_FILES}-${MAX_BULK_FILES} arasÄ±nda fotoÄŸraf seÃ§in.`);
                        document.getElementById('bulkDropZone')?.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        return;
                    }

                    if (!confirm("SipariÅŸinizi oluÅŸturmak Ã¼zeresiniz. Her ÅŸeyin doÄŸru olduÄŸundan emin misiniz?")) return;

                    // Visual Feedback (Overlay)
                    const overlay = document.getElementById('loadingOverlay');
                    overlay.classList.remove('hidden');

                    const btn = this.querySelector('button[type="submit"]');
                    btn.disabled = true;

                    const formData = new FormData(this);

                    try {
                        // Backend API Ã‡aÄŸrÄ±sÄ±
                        const res = await fetch('/api/olustur', { method: 'POST', body: formData });
                        const result = await res.json();

                        if (result.success && result.orderId) {
                            overlay.innerHTML = `
                            <div class="bg-white p-10 rounded-3xl flex flex-col items-center shadow-2xl max-w-md w-full text-center">
                                <div class="w-20 h-20 bg-gradient-to-br from-green-400 to-green-600 text-white rounded-full flex items-center justify-center text-4xl mb-6 shadow-lg">âœ“</div>
                                <h3 class="text-3xl font-bold text-slate-800 mb-3">ğŸ‰ TeÅŸekkÃ¼r Ederiz!</h3>
                                <p class="text-slate-600 mb-6">SipariÅŸiniz baÅŸarÄ±yla alÄ±ndÄ±. Ekibimiz en kÄ±sa sÃ¼rede anÄ± defterinizi hazÄ±rlamaya baÅŸlayacak!</p>
                                
                                <div class="w-full bg-gradient-to-br from-orange-50 to-yellow-50 border-2 border-orange-200 rounded-xl p-4 mb-4">
                                    <p class="text-xs font-semibold text-orange-700 uppercase tracking-wide mb-2">ğŸ“¦ SipariÅŸ NumaranÄ±z</p>
                                    <div class="flex items-center gap-3 bg-white p-3 rounded-lg border border-orange-300 shadow-sm">
                                        <code id="orderIdDisplay" class="flex-1 text-lg font-bold text-slate-800 font-mono select-all">${result.orderId}</code>
                                        <button onclick="copyOrderId('${result.orderId}')" class="px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg text-sm font-bold transition flex items-center gap-2 shadow-md">
                                            ğŸ“‹ Kopyala
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6 text-left">
                                    <p class="text-sm text-blue-800 font-medium mb-2">ğŸ’¡ <strong>Ã–nemli Bilgi:</strong></p>
                                    <p class="text-sm text-blue-700">Bu numarayÄ± gÃ¼vende tutun! Ä°lerleyen sÃ¼reÃ§te bizimle iletiÅŸime geÃ§tiÄŸinizde bu numarayÄ± kullanarak sipariÅŸinizi takip edebilirsiniz.</p>
                                </div>
                                
                                <button onclick="window.location.href='/'" class="w-full px-8 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white rounded-xl text-base font-bold transition shadow-lg">
                                    â¤ï¸ Harika! Kapat
                                </button>
                            </div>
                          `;
                        } else {
                            throw new Error(result.error || "Bilinmeyen hata oluÅŸtu.");
                        }
                    } catch (error) {
                        overlay.classList.add('hidden');
                        alert("âŒ Hata: " + error.message);
                        btn.disabled = false;
                    }
                });
            } else {
                console.error("HATA: 'autoForm' bulunamadÄ±! HTML ID'sini kontrol edin.");
            }

            // Copy Order ID (Global)
            window.copyOrderId = function (orderId) {
                navigator.clipboard.writeText(orderId).then(() => {
                    alert('âœ… SipariÅŸ numarasÄ± kopyalandÄ±!\n\n' + orderId);
                }).catch(err => {
                    const textArea = document.createElement('textarea');
                    textArea.value = orderId;
                    textArea.style.position = 'fixed';
                    textArea.style.opacity = '0';
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    alert('âœ… SipariÅŸ numarasÄ± kopyalandÄ±!\n\n' + orderId);
                });
            }
        });
    </script>
</body>

</html>